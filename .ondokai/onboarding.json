{
  "project_metadata": {
    "name": "NutJS Desktop Automation API – Web/Desktop Automation, Input Event Streaming, and LLM Integration",
    "domain": [
      "Desktop Automation",
      "Web/Mobile/Desktop",
      "Input Automation",
      "Clipboard Management",
      "Screen Capture",
      "Keyboard and Mouse Control",
      "AI Integration",
      "Large Language Models",
      "Natural Language Processing",
      "Backend API",
      "RESTful API",
      "Test Automation",
      "UI Automation",
      "Event Streaming (SSE)",
      "Command Execution",
      "Validation",
      "Security",
      "Observability",
      "Logging",
      "DevOps",
      "Status Monitoring"
    ],
    "current_phase": [
      "Development",
      "Production",
      "Maintenance",
      "Stable Configuration",
      "Testing Automation",
      "MVP",
      "Debugging"
    ],
    "critical_business_rules": [
      "Autenticação obrigatória via api key para acesso aos endpoints",
      "Proteção das chaves de api",
      "Configuração correta do ambiente para evitar falhas",
      "Validação rigorosa dos parâmetros de entrada para evitar comandos inválidos",
      "Limites de tempo e tamanho para operações de digitação e captura",
      "Garantia de resposta em tempo hábil (menos de 5 segundos para a maioria das operações)",
      "Manter integridade dos testes automatizados",
      "Garantir integridade do código versionado",
      "Manter repositório limpo de arquivos temporários e sensíveis",
      "Garantir execução correta dos comandos de automação",
      "Manter integridade e segurança das operações de controle do mouse",
      "Validação rigorosa dos dados de entrada",
      "Disponibilidade contínua da api",
      "Limite de uso de memória para evitar crashes",
      "Integridade das ações de automação",
      "Segurança no acesso ao clipboard",
      "api deve garantir segurança no controle remoto da automação",
      "Manter integridade do sistema operacional durante automação",
      "Garantia de valores default para parâmetros opcionais",
      "Content size must not exceed 1 MB",
      "Text input must not be empty or contain only control characters",
      "Key presses must be from a predefined supported set",
      "Key combinations must have between 1 and 5 keys and only use allowed modifiers and letters",
      "Timing values must be non-negative integers and not exceed 300000ms",
      "Operações devem retornar resultados padronizados",
      "Tratamento robusto de erros",
      "Manter ordem cronológica dos eventos",
      "Garantir replay correto após reconexão",
      "Rate limiting para evitar sobrecarga",
      "Garantir entrega de eventos para todos os listeners",
      "Filtragem de teclas não imprimíveis",
      "Limite máximo de 10.000 caracteres para digitação",
      "Delay máximo permitido de 300.000ms (5 minutos)",
      "Validação rigorosa de coordenadas dentro dos limites da tela",
      "Emissão correta e sequencial de eventos de mouse",
      "Execução confiável das ações físicas do mouse",
      "Precisão mínima de reconhecimento (confidence) deve ser respeitada",
      "Timeouts para espera de templates não devem ser ultrapassados",
      "Logs devem registrar falhas para auditoria",
      "Registro único de singletons para serviços de eventos",
      "Consistência na injeção de dependências",
      "Variáveis de ambiente devem estar definidas para evitar falhas",
      "Chaves de api não devem ser expostas em código fonte",
      "Ambiente deve ser corretamente identificado para habilitar comportamentos específicos",
      "bufferSize deve estar entre 1 e 100000",
      "heartbeatMs deve estar entre 1000 e 300000 ms",
      "maxRate deve estar entre 1 e 50000 eventos/s",
      "maxEventAge deve estar entre 1000 e 3600000 ms",
      "maxTextLength must be between 1 and 100000",
      "defaultDelayPerChar must be non-negative",
      "maxDelay must be between 0 and 3600000",
      "batchSize must be between 1 and 1000",
      "defaultMode must be one of: instant, perChar, total",
      "Log level must reflect environment settings",
      "Development logs must be human-readable",
      "Production logs must be performant and minimal",
      "minDuration must be less than maxDuration",
      "Duration values must be positive integers",
      "Smooth movement flag must be boolean",
      "Garantir resposta consistente para sucesso e falha",
      "Não perder mensagens de erro",
      "Precisão na posição do cursor",
      "Execução correta da sequência de eventos",
      "Respeito aos tipos de botões e opções",
      "Regiões devem ser definidas com coordenadas válidas",
      "Confiança deve ser considerada para decisões automatizadas",
      "Serviços de automação devem implementar contratos definidos",
      "Execução de comandos deve ser consistente e rastreável",
      "api versioning deve ser respeitada",
      "Rotas /api protegidas contra conflito com SPA",
      "Shutdown gracioso para evitar perda de dados",
      "Garantir digitação instantânea sem delays",
      "Suporte apenas a teclas mapeadas",
      "Tratamento robusto de erros para operações de teclado",
      "Movimentação precisa do cursor",
      "Execução correta de cliques e arrastos",
      "Configuração dinâmica da velocidade do mouse",
      "Captura precisa e confiável da tela",
      "Conversão correta e eficiente para PNG",
      "Logging detalhado para auditoria",
      "Autenticação obrigatória para streaming de posição do mouse",
      "Validação rigorosa de schemas JSON para todas as requisições",
      "Garantia de resposta consistente com status de sucesso",
      "Garantir entrega ordenada e completa dos eventos",
      "Manter conexões SSE ativas com heartbeat",
      "Preservar integridade do buffer de eventos para replay",
      "Garantir que operações de teclado e clipboard sejam executadas com sucesso ou retornem erros claros",
      "Validar rigorosamente os dados de entrada para evitar comandos inválidos",
      "Manter integridade e segurança dos dados manipulados no clipboard",
      "Requisições devem conter api key válida",
      "Falha na autenticação bloqueia acesso",
      "Consistent error response format",
      "Proper HTTP status codes",
      "No leakage of sensitive error details in production",
      "request body must strictly conform to defined Zod schemas",
      "Invalid requests must be rejected with HTTP 400",
      "Proibição de propriedades adicionais não definidas",
      "Garantia de valores dentro dos limites especificados",
      "Content must be a non-empty string",
      "No additional properties allowed in requests",
      "Input data must conform to JSON Schema Draft 7",
      "Text input length between 1 and 10000 characters",
      "Registro correto e consistente das rotas",
      "Disponibilidade das APIs de automação",
      "Segurança no acesso às rotas",
      "Garantir entrega em tempo real dos eventos via SSE",
      "Manter integridade e consistência do buffer de eventos",
      "Respeitar limites de idade máxima para eventos armazenados",
      "Garantir que comandos de mouse sejam enviados e recebidos corretamente",
      "Não causar efeitos colaterais inesperados no sistema alvo",
      "Garantir integridade e precisão dos dados de input",
      "Diferenciar corretamente eventos de mouse e teclado",
      "Manter sincronização temporal dos eventos",
      "Garantir unicidade do id do evento",
      "Manter ordem temporal dos eventos",
      "Precisão na captura das coordenadas do cursor",
      "Cobertura mínima de testes 80%",
      "Padrões de nomenclatura *.test.tsx",
      "Documentação contínua no know-how.txt",
      "api must return valid base64 image data",
      "Saved file must be a valid PNG",
      "Errors must abort process",
      "Isolamento completo dos testes",
      "Consistência dos mocks",
      "Ambiente de testes controlado",
      "Não emitir arquivos durante compilação (noEmit: true)",
      "Excluir node_modules da compilação",
      "Garantir tipagem estrita",
      "Separação clara entre src e dist",
      "Exclusão de testes do build",
      "Excluir arquivos de teste da compilação",
      "Remover comentários no output",
      "Não gerar source maps em produção",
      "Validação rigorosa dos parâmetros de entrada para evitar chamadas inválidas ao LLM",
      "Respeito aos limites de tokens e temperatura",
      "Validação rigorosa de formatos de saída",
      "Garantia de resposta consistente e formatada",
      "Fallback seguro em caso de erro no parsing",
      "Manter limites de maxTokens por modelo",
      "Respeitar custo por token para controle financeiro",
      "Timeout e retries configurados para evitar falhas silenciosas",
      "Garantir integridade dos dados de resposta",
      "Manter compatibilidade com versões do modelo",
      "Garantir resposta consistente do LLM",
      "Manter segurança das chaves api",
      "Registrar logs de uso e erros",
      "Validação rigorosa do input",
      "Autenticação obrigatória via x-api-key",
      "Limite máximo para tamanho do outputFormat",
      "Respeito aos limites de tokens e temperatura para controle de custo e performance",
      "Registro correto e único de dependências no container",
      "Isolamento de serviços para evitar efeitos colaterais",
      "Registro correto e sequencial das rotas",
      "Propagação adequada de erros",
      "Isolamento dos controllers",
      "Validação estrita do formato JSON de saída",
      "Prevenção de prototype pollution",
      "Controle de profundidade de esquemas para evitar recursão infinita",
      "Validação estrita dos dados conforme esquema",
      "Cache de esquemas deve respeitar TTL para evitar dados obsoletos",
      "Garantir compatibilidade entre formatos legado e dinâmico",
      "Padronizar respostas de sucesso e erro",
      "Evitar perda de dados em transformações",
      "Garantir integridade e formato correto da resposta do LLM",
      "Tratar erros do modelo sem falhas silenciosas",
      "Limitar tamanho e profundidade do schema de saída",
      "Mapeamento correto entre modelo e provedor",
      "Consistência na enumeração de modelos",
      "api key must be valid and kept secret",
      "Service endpoint must respond within acceptable time",
      "Payload format must comply with api specification",
      "Resposta válida do modelo deve conter dados no formato esperado",
      "Testes devem validar múltiplos modelos para cobertura funcional",
      "Suporte correto a todas as teclas mapeadas",
      "Tratamento robusto de erros para evitar falhas silenciosas",
      "Execução correta da ordem de pressionar e liberar em combinações",
      "Reliable input simulation",
      "Consistent clipboard state",
      "Graceful error handling",
      "Captura precisa e em tempo real dos eventos globais de mouse e teclado",
      "Encerramento gracioso para evitar vazamento de recursos",
      "Captura precisa e confiável de eventos de input",
      "Tratamento correto de erros para evitar crashes",
      "Garantir inicialização correta do GlobalInputCaptureService",
      "Registrar falhas críticas de inicialização",
      "Parar serviços de captura de eventos de forma segura",
      "Não perder eventos de input relevantes",
      "Evitar sobrecarga por excesso de eventos",
      "Garantir compatibilidade multiplataforma, especialmente macOS",
      "Ensure reliable start and stop of event capture",
      "Avoid resource leaks on shutdown",
      "Garantir rate limiting configurável para evitar sobrecarga",
      "Manter singleton para consistência do dispatcher",
      "Listeners devem ser gerenciados corretamente para evitar leaks",
      "Disponibilidade da interface para interação com api",
      "Carregamento correto dos recursos externos",
      "Precisão na captura de tela",
      "Sincronização entre controle de mouse e teclado",
      "Exibição correta do status do sistema",
      "Atualização assíncrona confiável do status",
      "Navegação segura para documentação externa",
      "render root component only once",
      "Ensure DOM element with id 'root' exists",
      "Consistência visual",
      "Responsividade em múltiplos dispositivos",
      "Interatividade fluida em botões",
      "Consistência visual entre navegadores",
      "Suporte a layouts responsivos",
      "Manter tipagem estrita",
      "Garantir compatibilidade JSX",
      "Excluir node_modules e dist do build",
      "Build consistency",
      "Hot-reloading enabled for dev",
      "Output directory cleaned before build",
      "Garantir controle seguro da automação desktop via web",
      "Manter compatibilidade com api NutJS",
      "Exibir status correto da api",
      "Não permitir múltiplas checagens simultâneas",
      "Atualizar status em tempo real",
      "cache TTL de 60 segundos para status",
      "timeout de requisição em 5 segundos",
      "manter integridade do cache localStorage",
      "Status accuracy must never be compromised",
      "Latency measurement must be precise",
      "Build output must be cache-busted",
      "Dev server proxy must route api calls correctly",
      "endpoint de status deve estar sempre disponível",
      "Resposta deve conter latência e timestamp atual"
    ]
  },
  "technical_stack": {
    "primary_language": [
      "TypeScript 5.x",
      "Node.js 18+",
      "JavaScript (ES2020+)",
      "React 18.x",
      "HTML5",
      "CSS3"
    ],
    "frameworks": [
      "Fastify 4.x",
      "React 18.x",
      "Jest 29.x",
      "Webpack 5.x",
      "PM2 5",
      "TSyringe",
      "Zod 3.x",
      "LangChain 0.x",
      "Express.js",
      "NutJS",
      "uiohook-napi",
      "React-Bootstrap 2.x",
      "Bootstrap 5.3.2",
      "dotenv 16.x",
      "pino 8.x"
    ],
    "databases": ["PostgreSQL 15", "Redis 7.0", "None"],
    "external_services": [
      "OpenAI API",
      "DeepSeek API",
      "NutJS",
      "clipboardy",
      "sharp",
      "LangChain LLM API",
      "SSE clients",
      "nanoid",
      "@nut-tree-fork/nut-js",
      "pino",
      "Server-Sent Events (SSE)",
      "GitHub (external documentation)",
      "NutJS Desktop Automation API",
      "Local backend API (http://localhost:3000/api)",
      "Environment variables"
    ],
    "package_manager": ["npm", "yarn"]
  },
  "architecture_patterns": {
    "design_pattern": [
      "Clean Architecture",
      "Dependency Injection",
      "Modular Architecture",
      "RESTful API",
      "Event-driven (SSE for streaming)",
      "Singleton",
      "Adapter Pattern",
      "Factory Pattern",
      "Observer Pattern",
      "Service Layer",
      "DTO Pattern",
      "Schema Validation",
      "Plugin Architecture",
      "Component-Based Architecture (frontend)",
      "Responsive Web Design"
    ],
    "folder_structure": [
      "src/ (main source code)",
      "dist/ (build output)",
      "web/ (frontend)",
      "tests/ (unit and integration tests)",
      "config/ (configuration and logger)",
      "domain/ (entities and interfaces)",
      "application/services (business logic and services)",
      "infrastructure/adapters (external integrations)",
      "interface/controllers (controllers and middleware)",
      "schemas/ (validation schemas)",
      "types/ (shared types)",
      "public/ (static assets and HTML template)",
      "node_modules/ (dependencies)",
      "coverage/ (test coverage)",
      "logs/ (log files)"
    ],
    "naming_conventions": [
      "camelCase for variables and functions",
      "PascalCase for classes and types",
      "kebab-case for files and folders",
      "UPPER_SNAKE_CASE for environment variables and constants",
      "Interfaces prefixed with 'I'",
      "Suffix 'Service' for service classes",
      "Suffix 'request' for DTOs",
      "CamelCase for enums",
      "PascalCase for React components"
    ],
    "module_boundaries": [
      "Clear separation between backend (api) and frontend (React)",
      "Domain does not depend on Application or Infrastructure",
      "Application depends on Domain",
      "Infrastructure depends on Application",
      "Interface depends on Application and Infrastructure",
      "Separation between controllers, services, and infrastructure",
      "Dependency injection for decoupling",
      "Separation between validation (schemas) and business logic",
      "Isolated configuration modules",
      "Isolated DTOs and validation schemas",
      "Controllers expose routes and delegate to services",
      "Services encapsulate business logic and hardware/system interactions",
      "Types and interfaces separated from logic",
      "Isolated error handling",
      "Frontend components isolated from business logic"
    ]
  },
  "code_standards": {
    "style_guide": [
      "Airbnb JavaScript/TypeScript Style Guide",
      "ESLint Recommended",
      "Prettier",
      "TypeScript ESLint Recommended",
      "CSS Standard Practices",
      "JSDoc for documentation"
    ],
    "linting_rules": [
      "ESLint with @typescript-eslint plugin",
      "eslint-config-prettier",
      "eslint-plugin-prettier",
      "@typescript-eslint/no-explicit-any: error",
      "@typescript-eslint/no-unused-vars: error with argsIgnorePattern '^_'",
      "@typescript-eslint/no-floating-promises: error",
      "no-async-promise-executor: error",
      "no-await-in-loop: warn",
      "strict typing",
      "Regras para evitar any e garantir tipagem forte"
    ],
    "formatting": [
      "Prettier with default config",
      "prettier --write .",
      "semi: true",
      "trailingComma: all",
      "singleQuote: true",
      "printWidth: 100",
      "tabWidth: 2",
      "Integration with ESLint for consistent formatting"
    ],
    "documentation_style": [
      "JSDoc for functions and classes",
      "JSDoc for public methods and interfaces",
      "Markdown comments for endpoint descriptions",
      "Inline comments in Portuguese for context"
    ],
    "type_checking": [
      "TypeScript strict mode enabled",
      "StrictNullChecks",
      "noImplicitAny",
      "Strict TypeScript with explicit types for parameters and returns",
      "Zod for runtime validation",
      "TypeScript typings for payloads and responses"
    ]
  },
  "testing_strategy": {
    "test_framework": [
      "Jest 29.x",
      "ts-jest",
      "React Testing Library",
      "Postman Tests (JavaScript)"
    ],
    "test_structure": [
      "tests/ for unit and integration tests",
      "tests/unit for unit tests",
      "tests/integration for integration tests",
      "tests/components/ for UI components",
      "tests/hooks/ for custom hooks",
      "__tests__ folders adjacent to code"
    ],
    "coverage_requirements": [
      "Minimum 80% coverage",
      "branches >= 80%",
      "functions >= 80%",
      "lines >= 80%",
      "statements >= 80%"
    ],
    "test_patterns": [
      "AAA (Arrange, Act, Assert)",
      "Given-When-Then",
      "Mocks for external dependencies",
      "Direct API call and response validation",
      "Snapshot testing for UI",
      "**/__tests__/**/*.test.ts",
      "**/tests/**/*.test.ts",
      "**/tests/**/*.spec.ts"
    ],
    "mocking_approach": [
      "Mocks and spies via Jest",
      "jest.mock for external dependencies",
      "Mocks for clipboardy, pino, nanoid",
      "Mocks for services and adapters",
      "Mocks for FastifyRequest and FastifyReply",
      "Mocks for React components and external modules",
      "Mocks for hooks and async calls",
      "Mocks for APIs and child components"
    ]
  },
  "development_workflow": {
    "branch_strategy": ["GitHub Flow", "git Flow"],
    "commit_conventions": ["Conventional Commits"],
    "pr_requirements": [
      "Code review obrigatório",
      "Revisão obrigatória e testes aprovados",
      "Checks automáticos de lint e testes",
      "Passing CI checks"
    ],
    "ci_cd_pipeline": [
      "Build, lint, test, Deploy automatizados via GitHub Actions",
      "Unit tests",
      "Deploy automático para staging",
      "Build, test, Lint, Deploy stages"
    ]
  },
  "commands": {
    "setup": [
      "npm install",
      "cp .env.example .env",
      "npm install && npm run build",
      "npm install uiohook-napi"
    ],
    "install": ["npm install", "npm ci"],
    "dev": [
      "npm run dev",
      "npm run dev:web",
      "npm run dev:full",
      "npm start",
      "webpack serve --config webpack.config.js"
    ],
    "test": [
      "npm test",
      "npm run test",
      "npm run test:unit",
      "npm run test:integration",
      "npm run test:coverage",
      "npm test -- --coverage"
    ],
    "build": [
      "npm run build",
      "npm run build:web",
      "npm run build:prod",
      "tsc",
      "webpack --config webpack.config.js"
    ],
    "lint": ["npm run lint", "eslint . --ext .ts,.tsx", "npm run lint:fix"],
    "format": ["npm run format", "prettier --write .", "npm run format:check"]
  },
  "security_constraints": {
    "authentication_method": ["api Key via HTTP Header", "JWT", "api Keys for external services"],
    "authorization_rules": [
      "Role-based Access Control (RBAC)",
      "Acesso restrito a usuários com chave válida",
      "Controle de acesso via middleware Fastify",
      "Requisição deve conter api key válida para acesso"
    ],
    "sensitive_data": [
      "api Keys para OpenAI e DeepSeek",
      "Tokens JWT",
      "Clipboard data",
      "Environment variables",
      "User input event data (mouse, keyboard)",
      "Prompt e respostas do LLM",
      "Base64 image data"
    ],
    "security_headers": [
      "Content-Security-Policy",
      "X-Frame-Options",
      "Strict-Transport-Security",
      "Content-type: application/json",
      "x-api-key"
    ],
    "encryption_requirements": [
      "TLS para comunicação",
      "Uso de HTTPS para comunicação com APIs externas",
      "Criptografia em trânsito via HTTPS",
      "Hashing bcrypt para senhas"
    ]
  },
  "performance_requirements": {
    "response_time_limits": [
      "api responses < 200ms",
      "Respostas em menos de 5000ms para operações padrão",
      "Baixa latência para operações de automação e api REST",
      "Delay máximo configurável até 300.000ms (5 minutos)",
      "Operações de captura e busca devem responder em até 5 segundos",
      "Baixa latência para streaming SSE",
      "Resposta imediata para autenticação, < 100ms",
      "Timeout de 5 segundos para requisição de status"
    ],
    "optimization_priorities": [
      "Velocidade de build e testes",
      "Velocidade de resposta priorizada sobre uso de memória",
      "Controle de memória para evitar crashes",
      "Validação eficiente para evitar overhead em runtime",
      "Baixa latência e uso eficiente de memória",
      "Performance otimizada em produção",
      "Logging configurável para desenvolvimento e produção",
      "Redução do tamanho do bundle",
      "Responsividade e fluidez visual em múltiplos dispositivos"
    ],
    "caching_strategy": [
      "Cache Redis com TTL configurado para dados estáticos",
      "Buffer circular atua como cache de eventos recentes",
      "Configuração carregada uma única vez na inicialização",
      "Cache localStorage com TTL de 60 segundos",
      "Cache de esquemas compilados com TTL configurável",
      "Filename hashing for cache invalidation"
    ],
    "scalability_considerations": [
      "Arquitetura escalável horizontalmente via containers",
      "Suporte a múltiplas requisições simultâneas",
      "Streaming SSE para dados em tempo real",
      "Escalabilidade horizontal via Fastify e Node.js cluster",
      "Configuração centralizada facilita escalabilidade horizontal",
      "Suporte para múltiplos ambientes (desktop e web)",
      "Batch size configurável para escalabilidade no processamento",
      "Suporte a múltiplos clientes SSE simultâneos",
      "Componentes desacoplados facilitam escalabilidade"
    ]
  },
  "error_handling": {
    "error_format": [
      "JSON padrão com campos success, error, code e detalhes",
      "Zod validation error format",
      "Objeto CommandResult com success boolean e error string opcional",
      "Logs estruturados via logger configurado",
      "Resposta JSON com campo success e mensagens de erro padronizadas"
    ],
    "logging_strategy": [
      "Log level configurável via LOG_LEVEL",
      "Logging estruturado com pino",
      "Logs separados em logs/ e *.log",
      "Níveis debug, info, warn e error para monitoramento detalhado",
      "Mascaramento de dados sensíveis em logs",
      "Formato human-readable em dev"
    ],
    "monitoring_tools": [
      "Sentry para monitoramento de erros em produção",
      "PM2 internal monitoring",
      "Integrável com sistemas externos via logs (ex: ELK, Datadog)",
      "Logger customizado integrado ao sistema de monitoramento"
    ],
    "error_recovery": [
      "Retries automáticos para falhas temporárias",
      "Fallbacks configurados",
      "Validação prévia para evitar execução de comandos inválidos",
      "Tratamento de erros via middleware Fastify",
      "Shutdown gracioso para evitar falhas abruptas",
      "Recuperação de eventos perdidos via last-event-id",
      "Fallback seguro em caso de erro no parsing",
      "Reject invalid requests with HTTP 400 and descriptive message"
    ]
  },
  "dependencies_context": {
    "critical_dependencies": [
      "OpenAI API",
      "DeepSeek API",
      "TypeScript",
      "Jest",
      "Fastify",
      "TSyringe",
      "Zod",
      "clipboardy",
      "@nut-tree-fork/nut-js",
      "pino",
      "LangChain",
      "dotenv",
      "webpack",
      "react",
      "uiohook-napi",
      "sharp",
      "nanoid"
    ],
    "deprecated_packages": ["None"],
    "version_constraints": [
      "Node.js >=18",
      "TypeScript 5.x",
      "Fastify 4.x",
      "Zod >=3.x",
      "clipboardy >=3.0.0",
      "tsyringe >=4.0.0",
      "React >=18.0.0",
      "Bootstrap 5.3.2",
      "Font Awesome 6.4.0",
      "Webpack ^5.89.0"
    ],
    "internal_packages": [
      "@nut-tree-fork/* (nut-js ecosystem)",
      "src",
      "web",
      "domain/interfaces",
      "domain/entities",
      "application/services",
      "infrastructure/adapters",
      "interface/controllers",
      "config",
      "dto",
      "types",
      "schemas"
    ]
  },
  "current_challenges": {
    "technical_debt": [
      "Refatoração de módulos legados em JavaScript para TypeScript",
      "Necessidade de testes mais abrangentes para edge cases do clipboard",
      "Melhorar tratamento de eventos estendidos",
      "Manutenção das estratégias de digitação e eventos pode crescer em complexidade",
      "Tratamento de erros mais granular",
      "Melhorar cobertura de testes",
      "Validação de variáveis de ambiente ainda não implementada",
      "Uso de 'as any' pode comprometer segurança de tipos",
      "Falta de validação de parâmetros nas classes",
      "interface ainda sem métodos definidos pode levar a inconsistências",
      "Implementação incompleta dos métodos find e waitFor",
      "Necessidade de testes mais abrangentes para streaming SSE",
      "Autenticação e autorização não implementadas",
      "Monitoramento e alertas não integrados",
      "Uso de any para logger pode ser melhorado para tipagem forte",
      "Autenticação baseada em chave estática pode ser melhorada",
      "Necessidade de padronizar novos erros customizados",
      "Validação de tamanho máximo do conteúdo não implementada no schema",
      "Falta de tratamento explícito de erros no registro de rotas",
      "Ausência de testes automatizados formais e validação de respostas",
      "Ausência de validação runtime dos eventos",
      "Necessidade de maior detalhamento em testes unitários",
      "Documentação parcial em know-how.txt",
      "Necessidade de melhorar fallback e tratamento de erros em parsing complexo",
      "Tratamento de erros genérico pode ser refinado",
      "Suporte limitado a uma única estratégia de parsing",
      "Manutenção da retrocompatibilidade pode aumentar complexidade",
      "Necessidade de testes de integração com LLM real",
      "api key exposta no código",
      "Falta de tratamento detalhado de erros",
      "Chave api exposta no código",
      "Manutenção do mapeamento de teclas e suporte a novas teclas",
      "Ausência de testes automatizados",
      "Melhorar tratamento assíncrono na parada do serviço",
      "Mapeamento de keycodes pode ser ampliado para maior cobertura",
      "Melhorar tratamento de eventos não-printable",
      "Falta de testes automatizados",
      "Estilos inline podem ser melhor organizados",
      "Falta tratamento explícito de erros na chamada assíncrona",
      "Uso de !important pode dificultar manutenção futura",
      "Falta tratamento explícito de erros na UI",
      "Tratamento limitado de erros de localStorage cheio",
      "Falta de logging detalhado para erros"
    ],
    "known_issues": [
      "Inconsistências em ambientes de desenvolvimento local",
      "Limitações na manipulação de grandes volumes de texto para digitação",
      "Dependência de permissões específicas do SO",
      "Compatibilidade entre versões de Node.js e dependências nativas",
      "Limitação fixa de 1 MB pode ser insuficiente para alguns casos",
      "Possíveis falhas em sistemas operacionais com restrições de acesso ao clipboard",
      "Possível perda de eventos em buffer cheio",
      "Rate limit pode descartar eventos em picos",
      "Performance pode ser impactada em textos muito longos com delays altos",
      "Dependência da resolução da tela para validação de coordenadas",
      "Dependência da qualidade do adaptador externo para reconhecimento",
      "Dependência de variáveis de ambiente pode causar falhas se não configuradas",
      "Possível falha silenciosa se variáveis de ambiente forem mal formatadas",
      "Valores inválidos em variáveis de ambiente podem causar comportamento inesperado",
      "Possível vazamento de recursos se conexão SSE não for fechada corretamente",
      "Possível desconexão silenciosa se heartbeat falhar",
      "Possível excesso de logs em ambiente de desenvolvimento",
      "Possível aceitação de payloads maiores que 1MB sem validação extra",
      "Ausência de controle explícito de autenticação e autorização",
      "Possível falta de controle de rate limiting",
      "Dependência da disponibilidade da api local",
      "Dependência externa pode causar inconsistências se alterada",
      "Cobertura inicial baixa em alguns módulos",
      "Mocks insuficientes causam falhas intermitentes",
      "Dependência de schemas externos pode causar inconsistências se não sincronizados",
      "Parsing pode exceder timeout em schemas muito grandes",
      "Dependência de chaves api externas sujeitas a expiração",
      "Possível overhead na validação de schemas grandes",
      "Possível mascaramento de erros reais devido a mocks",
      "Possível complexidade em esquemas muito aninhados",
      "Possível falha em esquemas muito profundos ou complexos",
      "Limitação na validação de schemas muito grandes pode impactar performance",
      "Necessidade de manter sincronização entre enum e mapeamento",
      "Dependência de endpoint local limita testes em outros ambientes",
      "Tratamento limitado para erros lançados como tipos não-Error",
      "Necessidade de mocks extensivos para testes isolados",
      "Possível falha na captura se uiohook-napi não inicializar corretamente",
      "macOS Accessibility permissions may block event capture",
      "Possível perda de eventos em picos de alta frequência",
      "Potential platform compatibility issues with uiohook-napi",
      "Rate limiting depende de variável de ambiente, pode ser inválida",
      "Cache pode ser limpo se JSON inválido for detectado",
      "Latência medida não inclui tempo real de rede"
    ],
    "performance_bottlenecks": [
      "Análise de type-checking pode impactar performance do lint",
      "Operações de captura e busca de imagens podem ser custosas",
      "Uso de uma única instância pode limitar throughput",
      "Processamento intensivo de imagens pode impactar performance",
      "Operações lineares em tamanho do buffer para recuperação",
      "Processamento sequencial da fila pode atrasar em alta carga",
      "Uso de await sequencial em digitação por caractere pode causar lentidão",
      "Scroll suave pode causar delays perceptíveis em durações longas",
      "Decodificação base64 e busca podem ser custosas em imagens grandes",
      "Configurações incorretas podem impactar throughput e latência",
      "Configurações incorretas podem impactar performance de digitação",
      "Uso de delays pode impactar performance em movimentos longos",
      "Latência na obtenção da posição do mouse em intervalos muito curtos",
      "Buffer pode crescer indefinidamente sem pruning",
      "Operação type pode ser lenta dependendo do timing configurado",
      "Gerenciamento do buffer e listeners em alta escala",
      "Delays fixos podem impactar tempo total de execução",
      "Parsing síncrono pode impactar latência em formatos complexos",
      "Latência nas chamadas assíncronas a provedores externos",
      "Validação e parsing de outputFormat podem impactar performance",
      "Parsing JSON e compilação de esquemas podem impactar em cargas elevadas",
      "Parsing de formatos complexos pode ser custoso",
      "Potential event flooding mitigated by selective logging",
      "Limitação do rate limiting para evitar sobrecarga",
      "Processamento síncrono pode impactar em alta carga",
      "Uso de backdrop-filter pode impactar performance em dispositivos menos potentes",
      "Chamadas repetidas sem debounce podem impactar"
    ],
    "migration_status": [
      "Migração para TypeScript em andamento",
      "Atualizado para TypeScript 5.x, uso de Fastify 4.x",
      "Estável, sem migrações em andamento",
      "Migração gradual do formato legado para dinâmico em andamento"
    ]
  },
  "team_preferences": {
    "code_review_focus": [
      "Cobertura de testes",
      "Qualidade do código",
      "Conformidade com padrões",
      "Conformidade com regras de lint",
      "Evitar uso de any",
      "Tratamento correto de promessas",
      "Segurança, legibilidade e cobertura de testes",
      "Validação de segurança na autenticação",
      "Consistência nos formatos de resposta",
      "Validação de entrada",
      "Separação clara de camadas",
      "Uso correto de injeção de dependências",
      "Qualidade da tipagem",
      "Segurança e validação",
      "Consistência de logging",
      "Consistência de nomenclatura",
      "Performance e segurança",
      "Tratamento de erros",
      "Consistência de retorno",
      "Clareza e documentação"
    ],
    "documentation_requirements": [
      "Documentação clara via JSDoc",
      "Documentação clara para APIs e módulos críticos",
      "Documentação clara dos parâmetros e exemplos de uso",
      "Documentação clara dos endpoints e exemplos de uso",
      "Documentação clara via JSDoc e README atualizados",
      "Documentação via JSDoc para APIs e funções",
      "Documentação clara dos schemas e tipos",
      "JSDoc para todos os métodos públicos",
      "Documentação clara para métodos públicos e interfaces",
      "Documentação clara para serviços e adaptadores",
      "Documentar variáveis de ambiente e seus usos",
      "Documentação clara via JSDoc para interfaces e funções",
      "Comentários em português para contexto",
      "Documentação clara via JSDoc para novos endpoints e serviços",
      "Documentação clara das rotas e controladores",
      "Documentação clara para componentes e props",
      "Documentação clara para hooks e componentes"
    ],
    "communication_style": [
      "Comentários objetivos e formais",
      "Comentários claros e objetivos",
      "Uso de prefixo '_' para argumentos ignorados",
      "Comentários técnicos objetivos e uso de Markdown",
      "Comentários objetivos e técnicos",
      "Comentários claros e objetivos, em português",
      "Comentários claros e objetivos, uso de emojis para logs informativos",
      "Comentários objetivos e explicativos em português",
      "Comentários objetivos e técnicos, sem excesso de verbosidade",
      "Clareza e objetividade em comentários",
      "Uso de inglês para termos técnicos",
      "Comentários objetivos e uso de logs estruturados",
      "Comentários técnicos em português com termos técnicos em inglês",
      "Comentários objetivos e explicativos em inglês e português",
      "Comentários objetivos e uso de emojis para status",
      "Comentários objetivos e educados",
      "Uso de PRs para discussões técnicas"
    ],
    "decision_log": [
      "Adoção de regras estritas para async/await e tipos explícitos",
      "Adoção do padrão MVC e uso de JWT para autenticação",
      "Uso de api key para autenticação simples",
      "Separação modular por tipo de operação (mouse, keyboard, clipboard, screen, llm)",
      "Adoção do Clean Architecture para garantir manutenibilidade",
      "Escolha do PM2 para gerenciamento de processos",
      "Adoção de Fastify para alta performance",
      "Uso de tsyringe para DI",
      "Uso do Zod para validação e tipagem",
      "Uso de clipboardy para compatibilidade multiplataforma",
      "Limite de 1 MB para evitar overhead",
      "Uso de buffer circular para otimização de memória",
      "Uso de singleton para garantir instância única",
      "Rate limiter configurável via variável de ambiente",
      "Adoção do Strategy Pattern para flexibilidade em timing de digitação",
      "Adoção de DI para facilitar testes e extensibilidade",
      "Uso de eventos para rastreabilidade das ações do mouse",
      "Uso de Dependency Injection para desacoplamento",
      "Uso de pino para logging",
      "Adoção do tsyringe para DI",
      "Uso do padrão Adapter para integração com hardware e APIs",
      "Uso de dotenv para configuração centralizada",
      "Flags booleanas para ambiente",
      "Uso de fail-fast para evitar execução com configurações inválidas",
      "Imutabilidade das configurações para segurança",
      "Uso de pino-pretty apenas em desenvolvimento para melhor legibilidade",
      "Configuração imutável para segurança",
      "Escolha do padrão Factory Method para criação de ações",
      "Uso de Marker interface para padronizar serviços de automação",
      "Uso de Fastify para performance e simplicidade",
      "Injeção de dependências para desacoplamento",
      "Separação clara entre api e SPA",
      "Uso de NutJS para abstração de teclado",
      "Configuração de autoDelayMs para 0",
      "Escolha do Nut.js para controle de mouse",
      "Uso de DI para facilitar testes e manutenção",
      "Uso de NutJS para captura de tela",
      "Sharp para processamento de imagens",
      "Uso de SSE para streaming por simplicidade e compatibilidade",
      "Uso de SSE para streaming em tempo real",
      "Adoção de Fastify para alta performance e tsyringe para DI",
      "Uso de api key estática para autenticação simples",
      "Uso do DomainError para padronizar erros de negócio",
      "Uso de Zod para validação por ser declarativo e integrado com TypeScript",
      "Uso de JSON Schema Draft 7 para validação",
      "Uso do padrão Controller para separar lógica de rotas",
      "Adoção do plugin pattern do Fastify",
      "Separação clara entre controller e rotas",
      "Uso de async/await para simplicidade e legibilidade",
      "Uso de discriminated unions para eventos",
      "Separação clara entre mouse e keyboard",
      "Uso de union types para eventos",
      "Separação clara entre publisher e listener",
      "Uso exclusivo de *.test.tsx para testes",
      "Estratégia de cobertura rápida priorizando execução",
      "Uso de base64 para transporte de imagem",
      "Validação via assinatura PNG",
      "Uso de mocks globais para evitar efeitos colaterais em testes",
      "Uso de zod para validação e tipagem segura",
      "Uso de DI para desacoplamento, fallback em parsing, logging estruturado",
      "Escolha do padrão Adapter para flexibilidade de provedores",
      "Uso de injeção de dependência para desacoplamento",
      "Validação via Zod para segurança",
      "Uso de enums para garantir integridade dos modelos LLM",
      "Adoção de tsyringe para DI",
      "Mocks extensivos para testes unitários",
      "Uso de Fastify plugins para modularização",
      "Mocks para isolamento em testes unitários",
      "Sanitização para segurança",
      "Escolha do Zod como engine principal de validação",
      "Uso de cache para performance",
      "Manter suporte a legacy para garantir estabilidade",
      "Uso de type guards para segurança",
      "Uso de Factory para parsing e fallback para string em erro",
      "Uso de enum para modelos para garantir tipagem forte",
      "Uso de node-fetch para simplicidade e compatibilidade",
      "Separação de testes por modelo para modularidade",
      "Uso do Adapter para desacoplar biblioteca externa",
      "Padronização de erros com mensagens prefixadas",
      "Uso de DI para facilitar testes e modularidade",
      "Uso de import dinâmico para evitar carregamento desnecessário",
      "Use of event-driven pattern for input capture",
      "Adoção do tsyringe para injeção de dependências",
      "Centralização da inicialização em ApplicationStartupService",
      "Uso do uiohook-napi para compatibilidade multiplataforma",
      "Choice of uiohook-napi for global input capture",
      "Uso do padrão Singleton para garantir instância única",
      "Rate limiting configurável via env var",
      "Adoção de React Functional Components",
      "Uso de React-Bootstrap para UI",
      "Separação do modal em componente próprio",
      "Uso de React 18 com StrictMode para segurança",
      "Adoção de design responsivo e uso de classes utilitárias para modularidade",
      "Uso de cache localStorage para otimização de chamadas",
      "Uso do Fastify plugin pattern para modularidade"
    ]
  },
  "api_specifications": {
    "api_style": [
      "RESTful",
      "REST with SSE for streaming",
      "Server-Sent Events (SSE)",
      "RESTful JSON API"
    ],
    "versioning_strategy": ["URI versioning (e.g., /api/v1)", "Prefixo /api/v1 para versionamento"],
    "response_formats": [
      "application/json",
      "JSON padrão com campos success, data, error",
      "Base64 encoded images",
      "text/event-stream for SSE"
    ],
    "rate_limiting": [
      "1000 requests por minuto por IP",
      "Configuração via variável de ambiente INPUT_EVENT_RATE",
      "Limite padrão 5000 eventos por segundo"
    ]
  },
  "deployment_context": {
    "environments": ["development", "staging", "production", "Localhost: http://localhost:3000"],
    "deployment_method": [
      "PM2",
      "Docker",
      "Node.js runtime",
      "Webpack for frontend",
      "CI/CD pipeline via GitHub Actions",
      "Kubernetes"
    ],
    "environment_variables": [
      "NODE_ENV",
      "PORT",
      "LOG_LEVEL",
      "API_KEY",
      "OPENAI_API_KEY",
      "DEEPSEEK_API_KEY",
      "INPUT_EVENT_BUFFER",
      "INPUT_EVENT_RATE",
      "INPUT_EVENT_HEARTBEAT",
      "INPUT_EVENT_MAX_AGE",
      "KEYBOARD_DEFAULT_MODE",
      "KEYBOARD_MAX_TEXT_LENGTH",
      "KEYBOARD_DEFAULT_DELAY_PER_CHAR",
      "KEYBOARD_MAX_DELAY",
      "KEYBOARD_BATCH_SIZE",
      "MOUSE_MIN_DUR",
      "MOUSE_MAX_DUR",
      "MOUSE_DEFAULT_SMOOTH",
      "MOUSE_SAMPLE_RATE",
      "MOUSE_STREAM_INTERVAL",
      "LLM_API_KEY",
      "LLM_SERVICE_ENDPOINT",
      "CACHE_TTL",
      "ENABLE_CACHE",
      "OUTPUT_SCHEMA_MAX_SIZE",
      "OUTPUT_SCHEMA_MAX_DEPTH",
      "OUTPUT_SCHEMA_DEFAULT_MODE",
      "OUTPUT_SCHEMA_PARSE_TIMEOUT",
      "OUTPUT_SCHEMA_ENABLE_CACHE",
      "OUTPUT_SCHEMA_CACHE_TTL",
      "OUTPUT_SCHEMA_DEBUG",
      "REACT_APP_API_URL",
      "REACT_APP_GITHUB_DOCS_URL",
      "REACT_APP_ENV"
    ],
    "infrastructure_constraints": [
      "Limitação de memória em pods Kubernetes",
      "Permissões de acessibilidade no macOS",
      "Variável DISPLAY no Linux",
      "Suporte multiplataforma (Windows, Linux, macOS)",
      "Requisitos de permissões para automação",
      "Dependência do sistema operacional para acesso ao clipboard",
      "Limitação de memória para buffers grandes",
      "Limitação de instância única por processo",
      "Dependência de variáveis de ambiente para configuração",
      "Necessidade de acesso ao hardware do mouse e permissões adequadas",
      "Necessidade de acesso a recursos gráficos para captura de tela",
      "Limitações de memória e CPU para buffers grandes",
      "Batch size para controle de uso de memória",
      "Execução em ambientes com suporte a Node.js",
      "Necessidade de conexões persistentes para SSE, limitação de memória para múltiplas streams",
      "Necessidade de manter conexões SSE abertas",
      "Suporte a proxy sem buffering (X-Accel-Buffering: no)",
      "Necessidade de acesso a APIs de sistema para manipulação de teclado e clipboard",
      "Limitações de memória e CPU para execução do servidor",
      "Suporte a conexões SSE persistentes",
      "Dependência de ambiente local com api NutJS rodando",
      "Limite de tamanho para outputFormat configurável via outputFormatConfig",
      "Limitação de memória para cache",
      "Necessidade de alta disponibilidade",
      "Limite de memória para parsing e tempo máximo de execução",
      "Necessidade de servidor local rodando na porta 3000",
      "Necessidade de api DeepSeek rodando localmente",
      "Dependência de permissões para captura global de input no SO",
      "Requires macOS Accessibility permissions for input capture",
      "Requires OS support for global input hooks",
      "Limitação de processamento síncrono pode impactar escalabilidade",
      "Necessidade de suporte a HTTPS e CDN para assets estáticos",
      "Limitação de chamadas assíncronas simultâneas para status",
      "Limitações de rede para chamadas api",
      "Limitação de localStorage do navegador",
      "Baixa latência e alta disponibilidade exigidas"
    ]
  },
  "lastCommitHash": "234d111f94dc6282000ab25b8d250dc7c3739bf6"
}
