{
  "project_metadata": {
    "name": "NutJS Desktop Automation API – Web/Mobile/Desktop automation, input event capture, AI/LLM integration, and OCR services",
    "domain": [
      "Backend",
      "Web/Mobile/Desktop",
      "Desktop Automation",
      "API Authentication",
      "AI Integration",
      "Robotic Process Automation (RPA)",
      "UI Automation",
      "Screen Capture",
      "Clipboard Management",
      "Keyboard and Mouse Control",
      "Input Event Processing",
      "Test Automation",
      "Computer Vision",
      "Optical Character Recognition (OCR)",
      "Large Language Models (LLM)",
      "Natural Language Processing (NLP)",
      "API Development",
      "Frontend",
      "React ecosystem",
      "Software Development",
      "Validation",
      "Logging",
      "DevOps",
      "Status Monitoring",
      "Dependency Injection",
      "Event-driven architecture",
      "Data Validation",
      "Machine Learning",
      "Software Testing"
    ],
    "current_phase": [
      "Development",
      "Production",
      "Maintenance",
      "Stable Configuration",
      "Testing Automation",
      "MVP",
      "Debugging",
      "Testing and Validation",
      "Stable deployment",
      "Build otimizado",
      "Estabilização"
    ],
    "critical_business_rules": [
      "Proteção das chaves de API",
      "Configuração correta do ambiente para evitar falhas",
      "Manter integridade dos testes automatizados",
      "Garantir isolamento de logs e cobertura",
      "Código deve seguir regras de linting para evitar erros comuns",
      "Testes devem usar configuração específica para garantir validação correta",
      "Manter repositório limpo de arquivos temporários e sensíveis",
      "Garantir integridade do código versionado",
      "Autenticação obrigatória via API key para acesso aos endpoints",
      "Validação rigorosa dos parâmetros de entrada para evitar comandos inválidos",
      "Limites de tempo e tamanho para operações de digitação e captura",
      "Garantia de resposta em tempo hábil (menos de 5 segundos para a maioria das operações)",
      "Garantir execução correta dos comandos de automação",
      "Manter integridade e segurança das operações de controle do mouse",
      "Validação rigorosa dos dados de entrada",
      "Disponibilidade contínua da API",
      "Limite de uso de memória para evitar crashes",
      "Integridade das ações de automação",
      "Segurança no acesso ao clipboard",
      "Execução segura de comandos de automação",
      "Garantia de valores default para parâmetros opcionais",
      "Content size must not exceed 1 MB",
      "Key presses must be from a predefined supported set",
      "Timing values must be non-negative integers and not exceed 300000ms",
      "Operações devem retornar resultados padronizados",
      "Tratamento robusto de erros",
      "Manter ordem cronológica dos eventos",
      "Garantir replay correto após reconexão",
      "Rate limiting para evitar sobrecarga",
      "Garantir entrega de eventos para todos os listeners",
      "Filtragem de teclas não imprimíveis",
      "Limite máximo de 10.000 caracteres para digitação",
      "Delay máximo permitido de 300.000ms (5 minutos)",
      "Validação rigorosa de coordenadas dentro dos limites da tela",
      "Emissão correta e sequencial de eventos de mouse",
      "Execução confiável das ações físicas do mouse",
      "Precisão mínima de reconhecimento (confidence) deve ser respeitada",
      "Timeouts para espera de templates não devem ser ultrapassados",
      "Logs devem registrar falhas para auditoria",
      "Garantir singleton para serviços compartilhados",
      "Manter isolamento entre adaptadores e serviços",
      "Preservar integridade dos eventos capturados globalmente",
      "Variáveis de ambiente devem estar definidas para evitar falhas",
      "Chaves de API não devem ser expostas em código fonte",
      "Ambiente deve ser corretamente identificado para habilitar comportamentos específicos",
      "bufferSize deve estar entre 1 e 100000",
      "heartbeatMs deve estar entre 1000 e 300000 ms",
      "maxRate deve estar entre 1 e 50000 eventos/s",
      "maxEventAge deve estar entre 1000 e 3600000 ms",
      "maxTextLength must be between 1 and 100000",
      "defaultDelayPerChar must be non-negative",
      "maxDelay must be between 0 and 3600000",
      "batchSize must be between 1 and 1000",
      "defaultMode must be one of: instant, perChar, total",
      "Log level must reflect environment settings",
      "Development logs must be human-readable",
      "Production logs must be performant and minimal",
      "minDuration must be less than maxDuration",
      "Duration values must be positive integers",
      "Smooth movement flag must be boolean",
      "Garantir resposta consistente para sucesso e falha",
      "Precisão na posição do cursor",
      "Execução correta da sequência de eventos",
      "Respeito aos tipos de botões e opções",
      "Regiões devem ser definidas com coordenadas válidas",
      "Confiança deve ser considerada para decisões automatizadas",
      "Serviços de automação devem implementar contratos definidos",
      "Execução de comandos deve ser consistente e rastreável",
      "API versioning deve ser respeitada",
      "Rotas /api protegidas contra conflito com SPA",
      "Shutdown gracioso para evitar perda de dados",
      "Garantir digitação instantânea sem delays",
      "Suporte apenas a teclas mapeadas",
      "Tratamento robusto de erros para operações de teclado",
      "Movimentação precisa do cursor",
      "Execução correta de cliques e arrastos",
      "Configuração dinâmica da velocidade do mouse",
      "Captura precisa e confiável da tela",
      "Conversão correta e eficiente para PNG",
      "Logging detalhado para auditoria",
      "Autenticação obrigatória para streaming e captura sensível",
      "Limite de tamanho para imagens capturadas",
      "Respostas padronizadas para sucesso e erro",
      "Manter conexões SSE ativas com heartbeat",
      "Preservar integridade do buffer de eventos para replay",
      "Validar rigorosamente os dados de entrada para evitar comandos inválidos",
      "Requisições devem conter API key válida",
      "Falha na autenticação bloqueia acesso",
      "Consistent error response format",
      "Proper HTTP status codes",
      "No leakage of sensitive error details in production",
      "request body must strictly conform to defined Zod schemas",
      "Invalid requests must be rejected with HTTP 400",
      "Proibição de propriedades adicionais não definidas",
      "Garantia de valores dentro dos limites especificados",
      "Input data must conform to JSON Schema Draft 7",
      "Text input length between 1 and 10000 characters",
      "Registro correto e seguro das rotas",
      "Isolamento entre módulos",
      "Disponibilidade das APIs",
      "Garantir entrega em tempo real dos eventos via SSE",
      "Respeitar limites de idade máxima para eventos armazenados",
      "Garantir que comandos de mouse sejam enviados e recebidos corretamente",
      "Não causar efeitos colaterais inesperados no sistema alvo",
      "Garantir integridade e precisão dos dados de input",
      "Diferenciar corretamente eventos de mouse e teclado",
      "Manter sincronização temporal dos eventos",
      "Garantir unicidade do id do evento",
      "Cobertura mínima de testes 80%",
      "Padrões de nomenclatura *.test.tsx",
      "Documentação contínua no know-how.txt",
      "API must return valid base64 image data",
      "Saved file must be a valid PNG",
      "Errors must abort process",
      "Isolamento completo dos testes",
      "Consistência dos mocks",
      "Ambiente de testes controlado",
      "Não emitir arquivos durante compilação (noEmit: true)",
      "Excluir node_modules da compilação",
      "Garantir tipagem estrita",
      "Separação clara entre src e dist",
      "Exclusão de testes do build",
      "Remover comentários no output",
      "Não gerar source maps em produção",
      "Validação rigorosa dos parâmetros de entrada para evitar chamadas inválidas ao LLM",
      "Respeito aos limites de tokens e temperatura",
      "Validação rigorosa de formatos de saída",
      "Garantia de resposta consistente e formatada",
      "Fallback seguro em caso de erro no parsing",
      "Manter limites de maxTokens por modelo",
      "Respeitar custo por token para controle financeiro",
      "Timeout e retries configurados para evitar falhas silenciosas",
      "Garantir integridade dos dados de resposta",
      "Manter compatibilidade com versões do modelo",
      "Garantir resposta consistente do LLM",
      "Registrar logs de uso e erros",
      "Validação rigorosa do input",
      "Autenticação obrigatória via x-api-key",
      "Limite máximo para tamanho do outputFormat",
      "Respeito aos limites de tokens e temperatura para controle de custo e performance",
      "All dependencies must be registered correctly to avoid runtime failures",
      "Singleton services must be unique and globally accessible",
      "Registro correto e ordenado das rotas",
      "Instanciação única por execução",
      "Tratamento de erros assíncronos",
      "Validação estrita do formato JSON de saída",
      "Prevenção de prototype pollution",
      "Controle de profundidade de esquemas para evitar recursão infinita",
      "Validação estrita dos dados conforme esquema",
      "Cache de esquemas deve respeitar TTL para evitar dados obsoletos",
      "Garantir compatibilidade entre formatos legado e dinâmico",
      "Padronizar respostas de sucesso e erro",
      "Evitar perda de dados em transformações",
      "Garantir integridade e formato correto da resposta do LLM",
      "Tratar erros do modelo sem falhas silenciosas",
      "Limitar tamanho e profundidade do schema de saída",
      "Mapeamento correto entre modelo e provedor",
      "Consistência na enumeração de modelos",
      "API key must be valid and kept secret",
      "Service endpoint must respond within acceptable time",
      "Payload format must comply with API specification",
      "Autenticação via API key obrigatória",
      "Resposta válida do modelo deve conter dados no formato esperado",
      "Testes devem validar múltiplos modelos para cobertura funcional",
      "Suporte correto a todas as teclas mapeadas",
      "Tratamento robusto de erros para evitar falhas silenciosas",
      "Execução correta da ordem de pressionar e liberar em combinações",
      "Reliable input simulation",
      "Consistent clipboard state",
      "Graceful error handling",
      "Captura precisa e em tempo real dos eventos globais de mouse e teclado",
      "Encerramento gracioso para evitar vazamento de recursos",
      "Captura precisa e confiável de eventos de input",
      "Tratamento correto de erros para evitar crashes",
      "Garantir inicialização correta do GlobalInputCaptureService",
      "Registrar falhas críticas de inicialização",
      "Parar serviços de captura de eventos de forma segura",
      "Não perder eventos de input relevantes",
      "Evitar sobrecarga por excesso de eventos",
      "Garantir compatibilidade multiplataforma, especialmente macOS",
      "Ensure reliable start and stop of event capture",
      "Avoid resource leaks on shutdown",
      "Garantir rate limiting configurável para evitar sobrecarga",
      "Manter singleton para consistência do dispatcher",
      "Listeners devem ser gerenciados corretamente para evitar leaks",
      "Disponibilidade da interface para interação com API",
      "Carregamento correto dos recursos externos",
      "Navegação correta entre rotas definidas",
      "Manter estado da SPA sem recarregamento",
      "Exibição correta do status do sistema",
      "Atualização assíncrona confiável do status",
      "Navegação segura para documentação externa",
      "render root component only once",
      "Ensure DOM element with id 'root' exists",
      "Consistência visual",
      "Responsividade em múltiplos dispositivos",
      "Interatividade fluida em botões",
      "Consistência visual entre navegadores",
      "Suporte a layouts responsivos",
      "Manter tipagem estrita",
      "Garantir compatibilidade JSX",
      "Excluir node_modules e dist do build",
      "Build consistency",
      "Hot-reloading enabled for dev",
      "Output directory cleaned before build",
      "Integridade da comunicação com API NutJS",
      "Manter responsividade da UI",
      "Garantir compatibilidade com múltiplas versões do backend",
      "Exibir status correto da API",
      "Não permitir múltiplas checagens simultâneas",
      "Atualizar status em tempo real",
      "cache TTL de 60 segundos para status",
      "timeout de requisição em 5 segundos",
      "manter integridade do cache localStorage",
      "Status accuracy must never be compromised",
      "Latency measurement must be precise",
      "Environment variables must be loaded safely",
      "API proxy must route correctly",
      "Build output must be clean and cache-busted",
      "endpoint de status deve estar sempre disponível",
      "Resposta deve conter latência e timestamp atual",
      "Captura de tela deve retornar imagem válida em base64",
      "Imagem não pode exceder 1MB",
      "Erros devem ser tratados e comunicados corretamente",
      "Execução correta e segura das ações de mouse",
      "Resposta consistente das APIs",
      "Manutenção da conexão SSE estável",
      "API key must remain confidential",
      "Environment variables must be correctly set for each environment",
      "Não versionar dependências externas",
      "Manter arquivos de ambiente fora do repositório",
      "Garantir qualidade e consistência do código",
      "Prevenir erros em React Hooks",
      "Evitar variáveis não utilizadas",
      "Não permitir múltiplas requisições simultâneas",
      "Exibir feedback claro de erro",
      "Garantir segurança da chave API",
      "Respostas da API devem seguir o formato definido para garantir interoperabilidade",
      "Garantir IDs únicos para ações",
      "Manter integridade visual com ícones consistentes",
      "Limite máximo de ações não pode ser ultrapassado",
      "IDs das ações devem ser únicos",
      "Notificação de mudanças deve ocorrer sempre que o estado mudar",
      "Remoção correta e segura das ações",
      "Exibição precisa das ações configuradas",
      "Garantir responsividade do painel",
      "Notificar corretamente alterações via callback",
      "Integridade dos dados de ações automatizadas",
      "Consistência na captura de tela",
      "Execução sequencial das ações",
      "Persistência segura dos rascunhos",
      "Prevenção de execução concorrente",
      "Navegação segura entre páginas",
      "Apresentação clara das funcionalidades",
      "Modularidade para extensibilidade",
      "Respeitar limites de duração e quantidade de teclas em combinações",
      "Garantir que ações de digitação não excedam 10.000 caracteres",
      "Manter integridade das coordenadas e parâmetros de movimento",
      "Arquivos de linguagem devem estar presentes antes da execução do OCR",
      "Downloads incompletos devem ser removidos para evitar corrupção",
      "Images must be base64 encoded with valid data URI prefix",
      "Image size must not exceed 14MB encoded (approx. 10MB raw)",
      "Batch requests limited to max 10 images",
      "Config parameters must respect defined enums and ranges",
      "Garantir qualidade da imagem para OCR",
      "Manter integridade dos dados de imagem",
      "Não perder dados durante pré-processamento",
      "Reciclagem periódica dos workers para evitar vazamento de memória",
      "Garantir disponibilidade dos dados de linguagem para OCR",
      "Manter alta taxa de sucesso no reconhecimento",
      "Não processar imagens acima do limite de tamanho configurado",
      "Garantir resposta dentro do timeout configurado",
      "Manter integridade e validade dos dados de texto extraído",
      "maxImageSizeMb between 1 and 50",
      "maxProcessingMs between 1000 and 300000",
      "workerCount between 1 and 8",
      "cacheTtl non-negative",
      "at least one supported language configured",
      "preprocessing.targetWidth between 100 and 4000",
      "preprocessing.threshold between 0 and 255",
      "Autenticação obrigatória para acesso aos endpoints",
      "Limite máximo de tamanho para imagens processadas",
      "Processamento em lote limitado a 10 imagens simultâneas",
      "Tratamento e resposta adequada para erros específicos do OCR",
      "Manutenção da integridade e disponibilidade do cache",
      "Input images must be base64 encoded with valid data URI prefix",
      "OCR processing must respect configured languages and modes",
      "Timeouts must be enforced to avoid resource exhaustion",
      "Error responses must follow defined schema with specific error codes",
      "Precisão mínima de reconhecimento",
      "Suporte multilíngue configurável",
      "Complete validation coverage of Zod schemas including edge cases",
      "Correct mocking of ESM modules to avoid test failures",
      "Accurate handling of environment variables and configuration parsing",
      "Reliable event buffering with circular buffer semantics",
      "Secure and authenticated SSE endpoints",
      "Prompt must be non-empty string",
      "Model must be a valid enum value",
      "Temperature must be between 0 and 2 inclusive",
      "maxTokens must be an integer between 1 and 4096 inclusive",
      "Images must be valid base64 encoded with supported MIME types",
      "Batch requests must contain between 1 and 10 images",
      "Config parameters must respect defined limits (e.g., timeout, pageSegmentationMode)",
      "Invalid inputs must be rejected to prevent processing errors",
      "Validar formatos de entrada para evitar falhas em runtime",
      "Sanitizar dados para prevenir vulnerabilidades de segurança",
      "Garantir limites de profundidade para evitar sobrecarga",
      "Validação correta dos dados conforme schema",
      "Cache TTL respeitado para evitar dados obsoletos",
      "Erros de parsing devem ser logados e tratados",
      "Garantir inicialização e finalização corretas do serviço de captura",
      "Registrar logs de sucesso e falha",
      "Tratar exceções para evitar falhas silenciosas",
      "Buffer size configurável via env",
      "Sobrescrição circular de eventos",
      "Integridade temporal dos eventos",
      "Validação de tamanho máximo do output format",
      "Fallback para string em parsing falho",
      "Tratamento padronizado de erros",
      "OCR_MAX_IMAGE_SIZE_MB deve estar entre 1 e 50",
      "OCR_TIMEOUT_MS deve estar entre 1000 e 300000",
      "OCR_WORKERS deve estar entre 1 e 8 e não ultrapassar CPUs disponíveis",
      "Pelo menos uma linguagem OCR válida deve ser configurada",
      "Parâmetros de pré-processamento devem respeitar limites definidos",
      "maxSchemaSize entre 1 e 1MB",
      "maxDepth entre 1 e 20",
      "parseTimeout entre 100ms e 30s",
      "cacheTtl entre 1 e 1440 minutos",
      "Integridade dos enums de modelos",
      "Mapeamento correto entre modelos e provedores",
      "Tratamento seguro de valores não mapeados",
      "Uso correto das chaves API",
      "Fallback seguro para provedores desconhecidos",
      "Validação rigorosa do payload via Zod",
      "Limite máximo para outputFormat schema",
      "Tratamento detalhado de erros para garantir respostas HTTP corretas",
      "Garantir registro correto das rotas",
      "Validação rigorosa dos schemas de entrada e resposta",
      "Tratamento adequado de erros para evitar falhas silenciosas",
      "endpoint /status deve sempre responder com status HTTP correto",
      "Latência deve ser calculada e reportada com precisão",
      "Falhas devem retornar código 503 com mensagem clara",
      "Respostas devem seguir formato padrão success/error",
      "type guards devem distinguir corretamente legacy e dynamic responses"
    ]
  },
  "technical_stack": {
    "primary_language": [
      "TypeScript 5.x",
      "Node.js 18+",
      "JavaScript (ES2022+)",
      "React 18.x",
      "HTML5",
      "CSS3"
    ],
    "frameworks": [
      "Fastify 4.x",
      "React 18.x",
      "Jest 29.x",
      "Webpack 5.x",
      "TSyringe",
      "Zod 3.x",
      "NutJS",
      "LangChain",
      "React-Bootstrap 2.x",
      "Sharp 0.32.x",
      "tesseract.js 4.x",
      "uiohook-napi"
    ],
    "databases": [
      "PostgreSQL 15",
      "Redis 7.0",
      "Nenhum banco de dados persistente (uso localStorage)"
    ],
    "external_services": [
      "OpenAI API",
      "DeepSeek API",
      "NutJS",
      "LangChain LLM API",
      "Tesseract.js",
      "clipboardy",
      "sharp",
      "SSE clients",
      "Environment variables",
      "nanoid",
      "@nut-tree-fork/nut-js",
      "pino",
      "Server-Sent Events (SSE)",
      "GitHub (para documentação externa)",
      "CDN Bootstrap",
      "Font Awesome",
      "OCR Services",
      "Dependency Injection Container",
      "Local HTTP API at http://localhost:3000",
      "React environment variables"
    ],
    "package_manager": ["npm", "yarn"]
  },
  "architecture_patterns": {
    "design_pattern": [
      "Clean Architecture",
      "Dependency Injection",
      "Event-driven architecture",
      "RESTful API",
      "Singleton",
      "Factory Pattern",
      "Adapter Pattern",
      "Observer Pattern",
      "Service Layer",
      "DTO Pattern",
      "Schema Validation",
      "Modular Architecture",
      "Component-Based Architecture",
      "SPA (Single Page Application)",
      "Plugin Architecture",
      "Rate Limiter",
      "Circular Buffer",
      "Strategy Pattern",
      "Controller-Service Pattern",
      "Domain-Driven Design",
      "Declarative Validation"
    ],
    "folder_structure": [
      "src/ (código fonte principal)",
      "web/ (frontend React)",
      "dist/ (build output)",
      "tests/ (unit and integration tests)",
      "config/ (configurações e logger)",
      "domain/ (entidades e interfaces de domínio)",
      "application/services (serviços de negócio)",
      "infrastructure/adapters (integrações externas)",
      "interface/controllers (controllers e middleware)",
      "dto/ (Data Transfer Objects e schemas de validação)",
      "schemas/ (definições JSON Schema para validação de endpoints)",
      "public/ (assets estáticos)",
      "node_modules/ (dependências)",
      "coverage/ (test coverage)",
      "logs/ (arquivos de log)"
    ],
    "naming_conventions": [
      "UPPER_SNAKE_CASE para variáveis de ambiente",
      "camelCase para variáveis e funções",
      "PascalCase para classes e interfaces",
      "kebab-case para arquivos",
      "CamelCase para propriedades JSON",
      "Sufixo Service para classes de serviço",
      "Sufixo Adapter para adaptadores",
      "Arquivos .ts para código TypeScript",
      "Arquivos .test.tsx para testes",
      "Prefixo I para interfaces"
    ],
    "module_boundaries": [
      "Separação clara entre backend e frontend",
      "Domain não depende de Application ou Infrastructure",
      "Application depende de Domain",
      "Infrastructure depende de Application",
      "interface depende de Application e Infrastructure",
      "Separação clara entre controllers, services e infra",
      "Uso de interfaces para abstração",
      "Injeção de dependências para desacoplamento",
      "Separação clara entre schemas de input e tipos inferidos",
      "Isolamento das validações em módulo dedicado",
      "Separação clara entre validação (schemas) e lógica de negócio",
      "Controllers expõem rotas e delegam lógica para services",
      "Services encapsulam regras de negócio e interações com hardware ou sistema",
      "DTOs e schemas isolam validação e tipagem",
      "Configuração centralizada no container",
      "Rotas apenas expõem endpoints",
      "Configuração isolada em módulo próprio para evitar acoplamento",
      "Exclusão de node_modules para evitar processamento",
      "Separação clara entre código fonte e testes",
      "Separação clara entre UI (components) e lógica de negócio"
    ]
  },
  "code_standards": {
    "style_guide": [
      "Airbnb JavaScript/TypeScript Style Guide",
      "ESLint Recommended",
      "Prettier",
      "TypeScript ESLint recommended"
    ],
    "linting_rules": [
      "ESLint com regras para TypeScript, incluindo no-unused-vars, strict typing",
      "@typescript-eslint/no-explicit-any: error",
      "@typescript-eslint/no-unused-vars: error (ignora args iniciados com '_')",
      "eslint-config-standard-with-typescript",
      "plugin:react/recommended",
      "plugin:react-hooks/recommended",
      "no-console: warn",
      "prefer-const: error"
    ],
    "formatting": [
      "Prettier configurado para formatação automática",
      "semi: true",
      "trailingComma: all",
      "singleQuote: true",
      "printWidth: 100",
      "tabWidth: 2",
      "Integração com ESLint para formatação consistente"
    ],
    "documentation_style": [
      "JSDoc para documentação de funções e classes",
      "Comentários em português para contexto",
      "JSDoc para métodos públicos e interfaces"
    ],
    "type_checking": [
      "TypeScript strict mode (implícito)",
      "Strict TypeScript com análise de tipos via tsconfig.json",
      "Uso de zod para validação runtime",
      "Strict TypeScript (strict mode habilitado)",
      "Strict TypeScript typings via JSON Schema"
    ]
  },
  "testing_strategy": {
    "test_framework": ["Jest 29.x", "React Testing Library", "ts-jest"],
    "test_structure": [
      "tests/ para testes unitários e integração",
      "tests/unit para testes unitários",
      "tests/integration para testes de integração",
      "tests/components/ para testes de componentes React",
      "tests/hooks/ para hooks customizados",
      "Arquivos em pasta tests/**/*.ts com override de parserOptions",
      "Arquivos de teste localizados no mesmo diretório do código alvo",
      "Mocks extensivos para isolamento"
    ],
    "coverage_requirements": [
      "Cobertura mínima de 80%",
      "branches >= 80%",
      "functions >= 80%",
      "lines >= 80%",
      "statements >= 80%",
      "Cobertura mínima de 90% para DTOs e validações"
    ],
    "test_patterns": [
      "AAA (Arrange, Act, assert)",
      "Given-When-Then",
      "Mocks para dependências externas",
      "test.each for parameterized tests",
      "Snapshot Testing para UI",
      "Testes de limites, valores válidos e inválidos"
    ],
    "mocking_approach": [
      "Mocks e spies via Jest",
      "Uso de jest.mock e fixtures para dependências externas",
      "Mocks para simular inputs inválidos e defaults",
      "Mocks para entradas válidas e inválidas",
      "Mocks para serviços externos e injeção de dependência",
      "Mocks para dependências externas e componentes filhos",
      "Mocks para APIs e componentes filhos",
      "Mocks para hooks e chamadas assíncronas"
    ]
  },
  "development_workflow": {
    "branch_strategy": ["GitHub Flow", "git Flow"],
    "commit_conventions": ["Conventional Commits"],
    "pr_requirements": [
      "Code review obrigatório e testes aprovados",
      "Checks automáticos de lint e testes",
      "Revisão obrigatória por pelo menos um revisor",
      "Passing CI checks"
    ],
    "ci_cd_pipeline": [
      "Build, lint, test e deploy automatizados via GitHub Actions",
      "Lint, test, Build e Deploy automatizados",
      "Deploy automático em staging",
      "Execução de testes com coverage"
    ]
  },
  "commands": {
    "setup": ["npm install && cp .env.example .env"],
    "install": ["npm ci"],
    "dev": [
      "npm run dev",
      "npm run dev:web",
      "npm run dev:full",
      "webpack serve --config webpack.config.js"
    ],
    "test": [
      "npm run test:unit",
      "npm run test:integration",
      "npm run test:coverage",
      "jest --coverage"
    ],
    "build": [
      "npm run build",
      "npm run build:web",
      "npm run build:prod",
      "tsc --build",
      "webpack --config webpack.config.js"
    ],
    "lint": ["npm run lint", "eslint . --ext .ts", "npm run lint:fix"],
    "format": ["npm run format", "prettier --write .", "npm run format:check"]
  },
  "security_constraints": {
    "authentication_method": [
      "API key via HTTP header 'x-api-key'",
      "JWT",
      "API keys para autenticação de serviços externos"
    ],
    "authorization_rules": [
      "Role-based Access Control (RBAC)",
      "Acesso restrito a usuários com chave válida",
      "Controle de acesso via middleware Fastify",
      "Requisição deve conter API key válida para acesso",
      "Erros 401 e 403 para controle de acesso"
    ],
    "sensitive_data": [
      "API keys para OpenAI e DeepSeek",
      "Tokens JWT, senhas, chaves API - armazenados em variáveis de ambiente",
      "Conteúdo do clipboard",
      "Imagens base64 devem ser tratadas com cuidado para evitar exposição",
      "Dados de input do usuário e resultados OCR devem ser tratados com confidencialidade",
      "Prompt e respostas do LLM, tokens usados, dados de autenticação"
    ],
    "security_headers": [
      "Content-Security-Policy",
      "X-Frame-Options",
      "Strict-Transport-Security",
      "Content-type: application/json",
      "Accept: text/event-stream para SSE",
      "Cache-Control: no-cache",
      "x-api-key"
    ],
    "encryption_requirements": [
      "TLS para comunicação",
      "Uso de HTTPS para comunicação com APIs externas",
      "Criptografia em trânsito via HTTPS",
      "Hashing bcrypt para senhas",
      "Criptografia AES para dados sensíveis"
    ]
  },
  "performance_requirements": {
    "response_time_limits": [
      "API responses < 200ms",
      "Respostas em menos de 5000ms para operações padrão",
      "Baixa latência para operações de automação e API REST",
      "Operações de captura e busca devem responder em até 5 segundos",
      "Operações de input e captura devem ser em tempo real",
      "OCR pode tolerar latência moderada",
      "Timeout configurável entre 1000ms e 60000ms para OCR",
      "Timeout de 30 segundos para chamadas LLM",
      "Resposta rápida para geração de completions, idealmente < 1s"
    ],
    "optimization_priorities": [
      "Velocidade de build e testes",
      "Velocidade de resposta priorizada sobre uso de memória",
      "Velocidade e responsividade para operações de input e captura",
      "Controle de memória para evitar crashes",
      "Velocidade e eficiência na manipulação de eventos e imagens",
      "Build otimizado para produção via Webpack",
      "Validação eficiente para evitar overhead em runtime",
      "Baixa latência e uso eficiente de memória",
      "Performance otimizada em produção",
      "Logging configurável para desenvolvimento e produção",
      "Equilíbrio entre velocidade e precisão do reconhecimento",
      "Equilíbrio entre velocidade e uso de memória",
      "Baixa latência na leitura de configuração",
      "Baixa latência para comandos de mouse, controle de tamanho de imagens para memória",
      "Baixa latência e alta disponibilidade",
      "Baixa latência para streaming SSE",
      "Responsividade da UI e prevenção de execuções concorrentes"
    ],
    "caching_strategy": [
      "Cache Redis com TTL configurado para dados estáticos",
      "Buffer circular atua como cache de eventos recentes",
      "Uso de pools para OCR workers para otimizar processamento",
      "Cache localStorage com TTL de 60 segundos",
      "Cache LRU com TTL configurável para evitar reprocessamento de imagens idênticas",
      "Cache de resultados OCR com endpoint para limpeza manual"
    ],
    "scalability_considerations": [
      "Arquitetura escalável horizontalmente via containers",
      "Suporte a múltiplas requisições simultâneas",
      "Streaming SSE para dados em tempo real",
      "Escalabilidade horizontal via Fastify e Node.js cluster",
      "Arquitetura modular facilita escalabilidade horizontal",
      "Configuração centralizada facilita escalabilidade horizontal",
      "Batch processing up to 10 images per request",
      "Número configurável de workers para escalar processamento paralelo",
      "Design stateless para fácil escalabilidade horizontal",
      "Suporte a múltiplos modelos LLM e formatos de saída"
    ]
  },
  "error_handling": {
    "error_format": [
      "JSON padrão com campos success, error, code e detalhes",
      "Zod validation error format",
      "Objeto CommandResult com success boolean e error string opcional",
      "Logs estruturados via logger configurado",
      "Resposta JSON com campo success boolean e mensagem de erro em caso de falha",
      "Padronizado pelo Fastify via JSON Schema validation errors"
    ],
    "logging_strategy": [
      "Log level configurável via LOG_LEVEL",
      "Logs estruturados com níveis (info, warn, error) usando pino",
      "Logging detalhado com níveis debug, info e error via pino",
      "Logs centralizados para eventos e erros",
      "Formato human-readable em dev",
      "Mascaramento de dados sensíveis em logs"
    ],
    "monitoring_tools": [
      "Sentry para monitoramento de erros em produção",
      "PM2 internal monitoring",
      "Prometheus",
      "Logger customizado, possível integração com sistemas externos"
    ],
    "error_recovery": [
      "Retries automáticos para falhas temporárias",
      "Fallbacks configurados",
      "Validação prévia para evitar execução de comandos inválidos",
      "Tratamento de erros via middleware Fastify",
      "Tratamento de exceções para evitar falhas e retornar mensagens claras",
      "Fail-fast: encerra processo em caso de configuração inválida",
      "Fallback para valores padrão em parsing de variáveis de ambiente",
      "Shutdown gracioso para evitar falhas abruptas",
      "Tratamento de exceções com respostas HTTP 500 e encerramento controlado de streams",
      "Recuperação de eventos perdidos via last-event-id"
    ]
  },
  "dependencies_context": {
    "critical_dependencies": [
      "OpenAI API",
      "DeepSeek API",
      "Jest",
      "Webpack",
      "pm2",
      "@typescript-eslint/parser",
      "eslint",
      "@typescript-eslint/eslint-plugin",
      "prettier",
      "Express",
      "TypeScript",
      "NutJS library",
      "Fastify",
      "TSyringe",
      "Zod",
      "clipboardy",
      "@nut-tree-fork/nut-js",
      "pino",
      "react",
      "tesseract.js",
      "nanoid",
      "LangChain",
      "sharp",
      "uiohook-napi"
    ],
    "deprecated_packages": ["robotjs (versão 0.6.0 pode estar desatualizada)"],
    "version_constraints": [
      "Node.js >=18",
      "TypeScript 5.x",
      "Fastify 4.x",
      "zod >=3.0.0 <4.0.0",
      "clipboardy >=3.0.0",
      "tsyringe >=4.0.0",
      "dotenv >=16.0.0",
      "Jest >=29",
      "React >=18.0.0",
      "React-Bootstrap >=2.0.0",
      "Sharp 0.32.x",
      "tesseract.js 4.x",
      "JSON Schema Draft 7 compliance required"
    ],
    "internal_packages": [
      "@nut-tree-fork/* (nut-js ecosystem)",
      "domain/interfaces",
      "domain/entities",
      "services",
      "dto",
      "types",
      "application/services",
      "infrastructure/adapters",
      "interface/controllers",
      "schemas",
      "config"
    ]
  },
  "current_challenges": {
    "technical_debt": [
      "Refatoração de módulos legados em JavaScript para TypeScript",
      "Necessidade de testes mais abrangentes para edge cases do clipboard",
      "Documentação mais detalhada",
      "Manutenção das estratégias de digitação e eventos pode crescer em complexidade",
      "Tratamento de erros mais granular",
      "Melhorar cobertura de testes",
      "Validação de variáveis de ambiente ainda não implementada",
      "Validação poderia ser mais robusta para tipos e NaN",
      "Autenticação e autorização não implementadas",
      "Monitoramento e alertas não integrados",
      "Padronizar novos erros customizados",
      "Validação de tamanho máximo do conteúdo não implementada no schema",
      "Documentação incompleta das rotas",
      "Ausência de testes automatizados formais",
      "Necessidade de maior detalhamento em testes unitários",
      "Documentação parcial em know-how.txt",
      "Necessidade de melhorar fallback e tratamento de erros em parsing complexo",
      "Suporte limitado a uma única estratégia de parsing",
      "Necessidade de testes de integração com LLM real",
      "api key exposta no código",
      "Falta de tratamento detalhado de erros",
      "Chave API exposta no código",
      "Manutenção do mapeamento de teclas e suporte a novas teclas",
      "Ausência de testes automatizados",
      "Melhorar tratamento assíncrono na parada do serviço",
      "No formal error handling or test automation",
      "Falta tratamento explícito de erros na UI",
      "Tratamento limitado de erros de localStorage cheio",
      "Falta de logging detalhado para erros",
      "Gerenciamento seguro da chave API",
      "Ausência de controle de versões explícito",
      "Ausência de tratamento de erros explícito",
      "Possível complexidade crescente na formatação de ações",
      "Execução de ações via API ainda não implementada",
      "Necessidade de testes mais abrangentes para reciclagem de workers",
      "Gerenciamento manual do cache pode ser melhorado com bibliotecas especializadas",
      "Necessidade de melhorar tratamento de erros para casos extremos",
      "Expand support for additional image formats and languages",
      "Mocks with any type reduce type safety",
      "Complexity in testing ESM modules in CommonJS context",
      "Ausência de tipagem estática forte, dependência exclusiva de validação runtime",
      "Uso de require() para contornar sintaxe ESModules pode ser revisado",
      "Tratamento de exceções não-Error pode ser melhorado",
      "Necessidade de testes para concorrência e multi-threading",
      "Melhorar tratamento de erros não-Error",
      "Cobertura de testes de integração ausente"
    ],
    "known_issues": [
      "Inconsistências em ambientes de desenvolvimento local",
      "Limitações na manipulação de grandes volumes de texto para digitação",
      "Dependência de permissões específicas do SO",
      "Compatibilidade entre versões de Node.js e dependências nativas",
      "Download de tessdata pode falhar no postinstall, fallback implementado",
      "Limitação fixa de 1 MB pode ser insuficiente para alguns casos",
      "Possíveis falhas em sistemas operacionais com restrições de acesso ao clipboard",
      "Possível perda de eventos em buffer cheio",
      "Rate limit pode descartar eventos em picos",
      "Performance pode ser impactada em textos muito longos com delays altos",
      "Dependência da resolução da tela para validação de coordenadas",
      "Dependência da qualidade do adaptador externo para reconhecimento",
      "Possível overhead na criação de instâncias transient",
      "Dependência de variáveis de ambiente pode causar falhas se não configuradas",
      "Possível falha silenciosa se variáveis de ambiente forem mal formatadas",
      "Valores inválidos em variáveis de ambiente podem causar comportamento inesperado",
      "Limitação de tamanho de imagem pode impactar casos de uso com imagens maiores",
      "Possível desconexão silenciosa se heartbeat falhar",
      "Possível aceitação de payloads maiores que 1MB sem validação extra",
      "Latência em rotas OCR sob alta carga",
      "Dependência da disponibilidade da API local",
      "Dependência externa pode causar inconsistências se alterada",
      "Cobertura inicial baixa em alguns módulos",
      "Mocks insuficientes causam falhas intermitentes",
      "Dependência de schemas externos pode causar inconsistências se não sincronizados",
      "Parsing pode exceder timeout em schemas muito grandes",
      "Dependência de chaves API externas sujeitas a expiração",
      "Limitação na validação de schemas muito grandes pode impactar performance",
      "Necessidade de manter sincronização entre enum e mapeamento",
      "Dependência de endpoint local limita testes em outros ambientes",
      "Dependência de endpoint local ativo",
      "Tratamento limitado para erros lançados como tipos não-Error",
      "Necessidade de mocks extensivos para testes isolados",
      "Possível falha na captura se uiohook-napi não inicializar corretamente",
      "macOS Accessibility permissions may block event capture",
      "Possível perda de eventos em picos de alta frequência",
      "Potential platform compatibility issues with uiohook-napi",
      "Rate limiting depende de variável de ambiente, pode ser inválida",
      "Falta de tratamento para rotas não definidas",
      "Possível falta de feedback visual durante loading do status",
      "Cache pode ser limpo se JSON inválido for detectado",
      "Latência medida não inclui tempo real de rede",
      "Possível complexidade no gerenciamento de conexões SSE",
      "Possível exposição da chave API no front-end",
      "Ausência de retry automático em falhas de download",
      "Possível falha se dados de linguagem não estiverem disponíveis no cache",
      "Timeouts podem causar falhas em imagens complexas",
      "Dependência de formatos válidos de imagem",
      "Limite rígido de tamanho de imagem pode causar rejeição frequente",
      "Large base64 images may impact memory usage",
      "Timeouts in tests using jest.useFakeTimers() with async code",
      "NaN values passing numeric validations unintentionally",
      "Arrays converted to objects during recursive sanitization",
      "Limites rígidos podem causar rejeição de imagens legítimas muito grandes",
      "Tratamento de erros não-Error pode ser melhorado",
      "Possível estado inconsistente em múltiplas inicializações simultâneas",
      "Exceção ao inicializar com buffer size inválido",
      "Parsing errors podem levar a fallback inesperado",
      "Limite de tamanho de schema pode impactar uso",
      "Parsing JSON de OCR_PREPROCESSING pode falhar e requer fallback",
      "Interpretação de valores booleanos em strings pode causar confusão",
      "Fallback pode gerar custos inesperados",
      "Limite de tamanho do outputFormat pode impactar requests complexos",
      "Dependência de mocks para tempo pode causar falsos positivos"
    ],
    "performance_bottlenecks": [
      "Operações de captura e busca de imagens podem ser custosas",
      "Processamento intensivo de imagens pode impactar performance",
      "Operações lineares em tamanho do buffer para recuperação",
      "Processamento sequencial da fila pode atrasar em alta carga",
      "Uso de await sequencial em digitação por caractere pode causar lentidão",
      "Scroll suave pode causar delays perceptíveis em durações longas",
      "Decodificação base64 e busca podem ser custosas em imagens grandes",
      "OCR pode ser gargalo sem pool eficiente",
      "Configurações incorretas podem impactar throughput e latência",
      "Streaming SSE pode gerar overhead em conexões simultâneas",
      "Buffer pode crescer indefinidamente sem pruning",
      "Operação type pode ser lenta dependendo do timing configurado",
      "Registro assíncrono sequencial pode impactar startup",
      "Gerenciamento do buffer e listeners em alta escala",
      "Delays fixos podem impactar tempo total de execução",
      "Parsing síncrono pode impactar latência em formatos complexos",
      "Latência nas chamadas assíncronas a provedores externos",
      "Validação e parsing de outputFormat podem impactar performance",
      "Parsing JSON e compilação de esquemas podem impactar em cargas elevadas",
      "Parsing de formatos complexos pode ser custoso",
      "Limitação do rate limiting para evitar sobrecarga",
      "Processamento síncrono pode impactar em alta carga",
      "Uso de backdrop-filter pode impactar performance em dispositivos menos potentes",
      "Chamadas repetidas sem debounce podem impactar",
      "Limitação no tamanho da imagem para evitar sobrecarga",
      "Sobrecarga potencial em streaming contínuo de posição do mouse",
      "Execução sequencial com delay pode impactar performance em grandes listas",
      "Limite de jobs por worker pode impactar throughput se mal configurado",
      "Processamento OCR é custoso e depende da capacidade da pool de workers",
      "Processamento OCR pode ser custoso em imagens grandes ou lotes extensos",
      "OCR processing time varies with image complexity and mode",
      "Potential overhead in event buffering and timer mocks",
      "Processamento de imagens base64 muito grandes pode impactar memória",
      "Parsing de schemas complexos pode exceder timeout configurado",
      "Limitação do número de workers para CPUs disponíveis para evitar sobrecarga",
      "Validação e parsing podem impactar latência em schemas muito grandes"
    ],
    "migration_status": [
      "Migração para TypeScript em andamento",
      "Atualizado para TypeScript 5.x, uso de Fastify 4.x",
      "Estável, sem migrações em andamento",
      "Migração para Fastify 4 concluída",
      "Migração para TypeScript 5.0 concluída",
      "Ongoing migration to strict TypeScript and improved test coverage"
    ]
  },
  "team_preferences": {
    "code_review_focus": [
      "Cobertura de testes",
      "Qualidade do código",
      "Conformidade com padrões",
      "Conformidade com regras de linting",
      "Uso correto de tipos TypeScript",
      "Segurança, legibilidade e cobertura de testes",
      "Validação de segurança na autenticação",
      "Consistência nos formatos de resposta",
      "Validação de entrada",
      "Separação clara de camadas",
      "Uso correto de injeção de dependências",
      "Qualidade da tipagem",
      "Segurança e validação",
      "Qualidade do código via ESLint e Prettier",
      "Cobertura de testes via Jest",
      "Validação correta dos schemas",
      "Clareza e documentação",
      "Tratamento de erros",
      "Consistência de retorno",
      "Performance e segurança",
      "Verificação de tratamento de erros",
      "Conformidade com rate limiting",
      "Qualidade dos logs",
      "Validação de limites, tratamento de erros, clareza nas estratégias",
      "Consistência de logging",
      "Clareza nos logs",
      "Uso correto de async/await",
      "Consistência na injeção de dependências",
      "Uso correto de singletons e transient",
      "Validação de variáveis de ambiente e segurança das chaves",
      "Validação rigorosa de limites e tratamento de erros",
      "Validação de limites e tipos",
      "Clareza e imutabilidade das configurações",
      "Consistência de níveis de log",
      "Configuração correta para ambientes",
      "Validação de valores padrão e tipos",
      "Imutabilidade das configurações",
      "Consistência de tipos",
      "Clareza na definição das ações",
      "Validação de imutabilidade",
      "Clareza na documentação",
      "Consistência na implementação de interfaces",
      "Consistência de tipagem",
      "Tratamento correto de erros",
      "Modularidade e separação de responsabilidades",
      "Cobertura de teclas suportadas",
      "Conformidade com padrões de injeção",
      "Consistência de injeção de dependências",
      "Precisão dos movimentos",
      "Tratamento assíncrono correto",
      "Cobertura de logging",
      "Clareza e modularidade",
      "Validação de schemas, tratamento de erros, segurança em endpoints sensíveis",
      "Validação de schemas, tratamento de erros, logging e injeção de dependências",
      "Segurança da autenticação",
      "Clareza e simplicidade do middleware",
      "Consistência no tratamento de erros",
      "Cobertura de testes para casos de erro",
      "Validação correta de schemas",
      "Tratamento adequado de erros",
      "Conformidade com JSON Schema",
      "Clareza e simplicidade",
      "Segurança das rotas",
      "Validação de schemas",
      "Performance do streaming",
      "Clareza no fluxo assíncrono",
      "Clareza na separação de eventos",
      "Documentação adequada",
      "Conformidade com padrões de nomenclatura",
      "Uso correto de mocks",
      "Tratamento de erros, clareza de logs, modularidade",
      "Consistência dos mocks",
      "Isolamento dos testes",
      "Validação correta dos tipos e limites",
      "Consistência com enums e schemas externos",
      "Validação de tipos, tratamento de erros, cobertura de testes",
      "Clareza no tratamento de erros",
      "Consistência no uso de async/await",
      "Validação rigorosa, tratamento de erros, segurança e logging",
      "Validação de tipos e enums",
      "Conformidade com schema JSON",
      "Verificação de mocks corretos",
      "Confirmação de registros no container",
      "Manutenção da modularidade",
      "Isolamento de mocks",
      "Clareza na ordem de registro de rotas",
      "Validação de tipos e segurança contra prototype pollution",
      "Clareza na validação, tratamento de erros e uso correto do cache",
      "Cobertura de type guards",
      "Padronização de respostas",
      "Cobertura de testes, tratamento de erros e clareza de código",
      "Consistência de enum e mapeamento",
      "Segurança da API key",
      "Tratamento de erros e logging",
      "Clareza nos logs e tratamento de erros",
      "Consistência de nomenclatura",
      "Clareza e organização do código",
      "Uso adequado de async/await",
      "Conformidade com padrões de injeção de dependência",
      "Clareza no tratamento de eventos e robustez no controle de estado",
      "Tratamento de erros em listeners",
      "Conformidade com padrões de design",
      "Consistência de rotas",
      "Uso correto de React Router",
      "Qualidade do JSX",
      "Clareza na separação de responsabilidades",
      "Uso correto de hooks",
      "Tratamento de estados assíncronos",
      "Testes",
      "Consistência visual",
      "Responsividade",
      "Uso adequado de !important",
      "Clareza na renderização condicional",
      "Uso correto de tipos",
      "Acessibilidade e usabilidade",
      "Tratamento de erros, uso correto de hooks, performance",
      "Segurança das variáveis de ambiente",
      "Qualidade da configuração Webpack",
      "Clareza, simplicidade e tratamento de erros",
      "Conformidade com schema",
      "Conformidade com regras React Hooks",
      "Evitar variáveis não utilizadas",
      "Uso preferencial de const",
      "Clareza na UI",
      "Segurança da chave API",
      "Clareza na manipulação do estado",
      "Manutenção da imutabilidade",
      "Clareza na formatação de ações",
      "Manutenção da separação de responsabilidades",
      "Clareza na gestão de estado",
      "Consistência na UI",
      "Clareza na gestão de estado e tratamento de erros",
      "Validação de restrições",
      "Clareza na modelagem de ações",
      "Verificação de existência de arquivos antes do download",
      "Validation correctness",
      "type safety",
      "Error message clarity",
      "Clareza na manipulação de buffers",
      "Consistência na configuração dos workers",
      "Performance do cache",
      "Clareza na tipagem e documentação",
      "Validação de tratamento de erros, cobertura de testes e padrões de injeção",
      "Schema correctness",
      "Error handling",
      "test coverage completeness",
      "mock correctness",
      "Cobertura de testes, clareza das mensagens de erro, aderência ao padrão DTO",
      "Cobertura de testes, validação de limites, clareza de erros",
      "Validação de limites e enums",
      "Sanitização de dados",
      "Clareza e robustez do buffer",
      "Validação rigorosa de limites de configuração",
      "Cobertura de testes para todos os cenários de configuração",
      "Validação de limites",
      "Imutabilidade da configuração",
      "Consistência de enums e mapeamentos",
      "Tratamento de casos de erro",
      "Conformidade com padrões de DI",
      "Clareza nas mensagens de status",
      "Clareza e robustez dos type guards",
      "Consistência no formato de respostas"
    ],
    "documentation_requirements": [
      "Documentação clara via JSDoc",
      "Documentação clara para APIs e módulos críticos",
      "Documentação clara dos parâmetros e exemplos de uso",
      "Documentação clara dos endpoints e exemplos de uso",
      "Documentação clara via JSDoc e README atualizados",
      "Uso de JSDoc para documentação inline",
      "Documentação clara dos schemas e tipos",
      "JSDoc para todos os schemas e tipos",
      "JSDoc para todos os métodos públicos",
      "Documentação clara via JSDoc para interfaces e métodos públicos",
      "Documentação clara para métodos públicos e interfaces",
      "Documentação JSDoc para métodos públicos",
      "Documentar serviços e adaptadores com JSDoc",
      "Documentar variáveis de ambiente e seus usos",
      "Documentação clara via JSDoc para interfaces e funções",
      "JSDoc para todas as funções e constantes",
      "JSDoc para funções públicas",
      "Comentários JSDoc para todas as propriedades",
      "Documentação clara das interfaces e métodos estáticos",
      "Documentação clara via JSDoc para métodos públicos",
      "JSDoc para todas as interfaces e métodos",
      "Documentar rotas e serviços principais com JSDoc",
      "JSDoc para métodos públicos",
      "Documentação JSDoc para métodos públicos e endpoints",
      "Comentários em português para contexto",
      "Documentação clara via JSDoc para novos endpoints e serviços",
      "Documentação JSDoc para middlewares",
      "Documentar novas classes de erro e formatos de resposta",
      "Documentar middleware e schemas com JSDoc",
      "JSDoc para schemas",
      "Documentar todos os endpoints e contratos",
      "JSDoc para funções públicas e rotas",
      "Comentários explicativos mínimos",
      "JSDoc para todas as interfaces",
      "JSDoc para todas as interfaces e funções públicas",
      "Atualização do know-how.txt após correção de testes",
      "Comentários claros em testes complexos",
      "Comentários JSDoc para funções principais",
      "Documentação clara para mocks e setup global",
      "Documentação clara dos campos e regras de validação",
      "Documentação clara para APIs e DTOs",
      "Documentação clara dos schemas e enums",
      "Documentar contratos de serviços e adaptadores",
      "Documentação clara de controllers e rotas",
      "Documentação clara via JSDoc para todas as funções públicas",
      "Documentação clara via JSDoc para tipos e funções",
      "Documentação clara via JSDoc para funções públicas",
      "JSDoc para funções e enums",
      "Comentários claros e explicativos",
      "Comentários explicativos inline",
      "Documentação clara para métodos públicos do adaptador",
      "Documentação via JSDoc para controllers e serviços",
      "Documentação clara dos eventos capturados e fluxo de execução",
      "Minimal inline comments and JSDoc header",
      "Comentários explicativos em lógica complexa",
      "Documentação clara de componentes e rotas",
      "Documentação clara para hooks e componentes",
      "Documentação clara para novos componentes",
      "Comentários explicativos para efeitos visuais e responsividade",
      "JSDoc para componentes e funções",
      "Documentar configurações e scripts npm",
      "JSDoc para todas as funções públicas",
      "Documentação clara para APIs REST e contratos de serviço",
      "Documentação via JSDoc para novos componentes",
      "Comentários simples inline",
      "Documentação clara via JSDoc para funções e componentes",
      "Documentação JSDoc para funções e componentes",
      "Documentação JSDoc para componentes e props",
      "Documentação JSDoc para todos os componentes",
      "Documentação clara para novos componentes e funções",
      "Documentação clara em JSDoc para componentes",
      "Documentação clara via JSDoc para tipos e interfaces",
      "Comentários JSDoc para funções públicas",
      "JSDoc comments for all public methods and classes",
      "Documentação via JSDoc para todos os métodos públicos",
      "Documentação clara via JSDoc para métodos públicos e privados",
      "Documentação JSDoc para todos os métodos públicos",
      "Documentação clara via JSDoc para APIs e serviços",
      "JSDoc comments for all schemas and properties",
      "JSDoc comments for public APIs and complex logic",
      "Documentação clara dos schemas e regras de validação",
      "Documentação clara dos schemas e funções utilitárias",
      "Documentação clara para estratégias e factory",
      "Documentação clara para métodos públicos e fluxos de erro",
      "Documentação via JSDoc para métodos públicos",
      "Documentação clara de métodos públicos e contratos",
      "Documentação clara para variáveis de ambiente e seus limites",
      "Documentação clara para variáveis de ambiente e defaults",
      "Documentação clara para enums e funções públicas",
      "Documentação clara para controllers e DTOs",
      "Documentação clara dos schemas e rotas",
      "Documentação JSDoc para funções públicas",
      "Documentação clara de funções utilitárias e tipos"
    ],
    "communication_style": [
      "Comentários objetivos e formais",
      "Comentários técnicos objetivos e uso de Markdown",
      "Comentários técnicos em português com termos técnicos em inglês",
      "Comentários claros e objetivos",
      "Comentários claros e objetivos, em português",
      "Comentários claros e objetivos, uso de emojis para logs informativos",
      "Comentários objetivos e explicativos em português",
      "Comentários objetivos e técnicos, sem excesso de verbosidade",
      "Comentários claros e objetivos, foco em comportamento",
      "Comentários claros e objetivos em português",
      "Clareza e objetividade em comentários",
      "Uso de inglês para termos técnicos",
      "Comentários objetivos e uso de emojis para facilitar leitura",
      "Comentários objetivos e explicativos, uso de logs para rastreamento",
      "Comentários objetivos e claros",
      "Uso de português para contexto",
      "Comentários objetivos e informativos, sem excesso",
      "Comentários claros e objetivos, uso de JSDoc",
      "Comentários técnicos objetivos",
      "Comentários em português explicando propósito",
      "Clara e objetiva em PRs e comentários",
      "Foco em aprendizado coletivo",
      "Uso de emojis e mensagens claras no console",
      "Comentários objetivos e uso de logs estruturados",
      "Uso de inglês técnico para termos específicos",
      "Uso de emojis e comentários em português para clareza",
      "Comentários objetivos e explicativos em inglês e português",
      "Comentários objetivos e uso de emojis para status",
      "Informal console logs with emojis for clarity",
      "Comentários objetivos e uso de emojis para status em logs",
      "Informal console logs with emojis",
      "PRs detalhados",
      "Comentários objetivos e educados",
      "Clareza e objetividade em comentários e PRs",
      "Comentários objetivos e em português",
      "Uso de PRs para discussões",
      "Informativo e direto no console",
      "PRs com descrição clara",
      "PRs pequenos e focados",
      "Comentários objetivos e claros, foco em comportamento",
      "Comentários objetivos e uso de JSDoc",
      "Comentários objetivos e informativos",
      "Comentários em português com termos técnicos em inglês",
      "Concise, technical, objective",
      "Comentários objetivos e técnicos, sem redundância",
      "Comentários objetivos e em português para contexto, termos técnicos em inglês",
      "Comentários objetivos e PRs com descrição clara do propósito",
      "Clear, concise comments in Portuguese with technical terms in English",
      "Clear, concise comments with rationale for workarounds and mocks",
      "Comentários objetivos e explicativos, uso de inglês técnico para termos específicos",
      "Comentários objetivos e explicativos em testes",
      "Comentários objetivos e explicativos",
      "Uso de emojis em logs para clareza",
      "Comentários objetivos e uso de mensagens de erro claras",
      "Comentários objetivos e em português para contexto"
    ],
    "decision_log": [
      "Uso de ESLint com integração TypeScript e Prettier para padronização",
      "Adoção do padrão MVC e uso de JWT para autenticação",
      "Uso de API key para autenticação simples",
      "Separação modular por tipo de operação (mouse, keyboard, clipboard, screen, llm)",
      "Adoção do Clean Architecture para garantir manutenibilidade",
      "Escolha do PM2 para gerenciamento de processos",
      "Configuração para modo fork e limite de memória",
      "Adoção de Fastify para alta performance",
      "Uso de tsyringe para DI",
      "Adoção de injeção de dependência com tsyringe",
      "Separação clara entre backend e frontend",
      "Uso do Zod para validação e tipagem",
      "Uso de clipboardy para compatibilidade multiplataforma",
      "Limite de 1 MB para evitar overhead",
      "Uso de buffer circular para otimização de memória",
      "Uso de singleton para garantir instância única",
      "Rate limiter configurável via variável de ambiente",
      "Adoção do Strategy Pattern para flexibilidade em timing de digitação",
      "Adoção de DI para facilitar testes e extensibilidade",
      "Uso de eventos para rastreabilidade das ações do mouse",
      "Uso de Dependency Injection para desacoplamento",
      "Uso de pino para logging",
      "Adoção do tsyringe para DI",
      "Uso de singleton para serviços compartilhados",
      "Uso de dotenv para configuração centralizada",
      "Flags booleanas para ambiente",
      "Uso de fail-fast para evitar execução com configurações inválidas",
      "Imutabilidade das configurações para segurança",
      "Uso de pino-pretty apenas em desenvolvimento para melhor legibilidade",
      "Uso de variáveis de ambiente para flexibilidade",
      "Configuração imutável para segurança",
      "Escolha do padrão Factory Method para criação de ações",
      "Uso de factory method para criação a partir de MatchResult",
      "Uso de Marker interface para padronizar serviços de automação",
      "Uso de Fastify para performance e simplicidade",
      "Injeção de dependências para desacoplamento",
      "Separação clara entre API e SPA",
      "Uso de NutJS para abstração de teclado",
      "Configuração de autoDelayMs para 0",
      "Escolha do Nut.js para controle de mouse",
      "Uso de DI para facilitar testes e manutenção",
      "Uso de NutJS para captura de tela",
      "Sharp para processamento de imagens",
      "Injeção de dependência com tsyringe",
      "Uso de injeção de dependência para desacoplamento",
      "Streaming SSE para dados em tempo real",
      "Uso de SSE para streaming em tempo real",
      "Adoção de Fastify para alta performance e tsyringe para DI",
      "Uso de API key estática para autenticação simples",
      "Uso do DomainError para padronizar erros de negócio",
      "Uso de Zod para validação por ser declarativo e integrado com TypeScript",
      "Uso de JSON Schema Draft 7 para validação",
      "Adoção de DI para facilitar testes e modularidade",
      "Separação clara entre controller e rotas",
      "Uso de async/await para simplicidade e legibilidade",
      "Uso de discriminated unions para eventos",
      "Separação clara entre mouse e keyboard",
      "Uso de union types para eventos",
      "Separação clara entre publisher e listener",
      "Uso exclusivo de *.test.tsx para testes",
      "Estratégia de cobertura rápida priorizando execução",
      "Uso de base64 para transporte de imagem",
      "Validação via assinatura PNG",
      "Uso de mocks globais para evitar efeitos colaterais em testes",
      "Uso de zod para validação e tipagem segura",
      "Uso de DI para desacoplamento, fallback em parsing, logging estruturado",
      "Escolha do padrão Adapter para flexibilidade de provedores",
      "Validação via Zod para segurança",
      "Uso de enums para garantir integridade dos modelos LLM",
      "Adoção de tsyringe para DI",
      "Mocks extensivos para testes unitários",
      "Uso de DI container para resolução de controllers",
      "Mocking extensivo para testes isolados",
      "Uso de zod para validação e tipagem",
      "Sanitização para segurança",
      "Escolha do Zod como engine principal de validação",
      "Uso de cache para performance",
      "Manter suporte a legacy para garantir estabilidade",
      "Uso de type guards para segurança",
      "Uso de Factory para parsing e fallback para string em erro",
      "Uso de enum para modelos para garantir tipagem forte",
      "Uso de node-fetch para simplicidade e compatibilidade",
      "Separação de testes por modelo para modularidade",
      "Uso do Adapter para desacoplar biblioteca externa",
      "Padronização de erros com mensagens prefixadas",
      "Uso de DI para facilitar testes e modularidade",
      "Uso de import dinâmico para evitar carregamento desnecessário",
      "Use of event-driven pattern for input capture",
      "Adoção do tsyringe para injeção de dependências",
      "Centralização da inicialização em ApplicationStartupService",
      "Uso do uiohook-napi para compatibilidade multiplataforma",
      "Choice of uiohook-napi for global input capture",
      "Uso do padrão Singleton para garantir instância única",
      "Rate limiting configurável via env var",
      "Adoção do React Router v6 para roteamento declarativo",
      "Uso de React-Bootstrap para UI consistente",
      "Separação do modal em componente próprio",
      "Uso de React 18 com StrictMode para segurança",
      "Adoção de design responsivo e uso de classes utilitárias para modularidade",
      "Uso de cache localStorage para otimização de chamadas",
      "Uso de Webpack para build",
      "Dotenv para variáveis de ambiente",
      "Proxy para backend local",
      "Uso do Fastify plugin pattern para modularidade",
      "Uso de DI para desacoplamento",
      "Streaming SSE para atualizações em tempo real",
      "Desabilitar prop-types em favor de TypeScript",
      "Ignorar arquivos de tipos para regra no-unused-vars",
      "Uso de React Hooks para estado local",
      "API key via header para autenticação",
      "Uso de npm para gerenciamento de pacotes",
      "Uso do reducer para estado complexo",
      "Limite máximo de ações para controle de performance",
      "Uso de React-Bootstrap para UI",
      "Separação de formatação em funções auxiliares",
      "Uso de React Functional Components com hooks",
      "Separação clara entre captura de tela e construção de ações",
      "Uso do padrão de indexação para centralizar exports",
      "Separação clara entre UI e lógica de execução",
      "Uso de localStorage para persistência temporária",
      "Adoção de React-Bootstrap para UI",
      "Uso de React Router para navegação",
      "Uso de enums para garantir valores válidos",
      "Separação clara entre payloads de mouse e teclado",
      "Uso de download sequencial para controle de fluxo e simplicidade",
      "Use of Zod for runtime validation",
      "Separation of DTOs and helpers",
      "Uso de Sharp para processamento de imagem",
      "Injeção de dependência via tsyringe",
      "Escolha do tesseract.js para OCR",
      "Uso de pool e scheduler para paralelismo",
      "Reciclagem preventiva para estabilidade",
      "Uso de cache LRU para otimização",
      "Injeção de dependência para facilitar testes e modularidade",
      "Adoção de Clean Architecture e injeção de dependências para modularidade",
      "Adoption of JSON Schema Draft 7 for validation consistency",
      "Uso de enums para erros",
      "Separação clara entre dados e configuração",
      "Use require() in tests to bypass verbatimModuleSyntax issues",
      "mock ESM modules globally to avoid import errors",
      "Use type guards for union types in tests",
      "Uso do Zod para validação runtime, Jest para testes unitários",
      "Uso de zod para validação, preferir require() para evitar erros de sintaxe",
      "Uso de Zod para validação",
      "Limitação de profundidade para controle de complexidade",
      "Uso de singleton para factory",
      "Cache com TTL para performance",
      "Adoção de DI para testabilidade",
      "Uso de Jest para testes unitários",
      "Uso de buffer circular para controle eficiente de memória",
      "Uso de fallback para string output",
      "Configuração centralizada para debug e timeout",
      "Validação em ambiente de produção causa exit do processo para evitar configuração inválida",
      "Uso de frozen objects para garantir imutabilidade",
      "Validação rigorosa de inputs",
      "Uso de require() para compatibilidade com verbatimModuleSyntax",
      "Uso do Adapter Pattern para integração LLM",
      "Fallback para OpenAI como padrão",
      "Uso de tsyringe para injeção de dependência",
      "Validação via Zod",
      "Tratamento detalhado de erros HTTP",
      "Testes isolados para rotas",
      "Uso de Fastify para alta performance",
      "Endpoints de health check simples e robustos",
      "Uso de type guards para distinguir legacy e dynamic responses",
      "Padronização de respostas com metadata opcional"
    ]
  },
  "api_specifications": {
    "api_style": ["REST", "RESTful", "REST com endpoints SSE", "Server-Sent Events (SSE)"],
    "versioning_strategy": [
      "URI versioning (ex: /api/v1)",
      "Versionamento via URL (/api/v1/)",
      "Prefixo /api/v1 para versionamento"
    ],
    "response_formats": [
      "application/json",
      "JSON padrão com campos success, data, error",
      "Base64 encoded images",
      "text/event-stream para SSE",
      "JSON customizado validado por schemas"
    ],
    "rate_limiting": [
      "1000 requests por minuto por IP",
      "Configuração via variável de ambiente INPUT_EVENT_RATE",
      "Limite padrão 5000 eventos por segundo",
      "Configuração de maxRate para limitar eventos por segundo"
    ]
  },
  "deployment_context": {
    "environments": ["development", "staging", "production", "Localhost: http://localhost:3000"],
    "deployment_method": [
      "PM2",
      "Docker",
      "Node.js process manager",
      "CI/CD pipeline",
      "Kubernetes",
      "Webpack para frontend bundling"
    ],
    "environment_variables": [
      "NODE_ENV",
      "PORT",
      "LOG_LEVEL",
      "API_KEY",
      "OPENAI_API_KEY",
      "DEEPSEEK_API_KEY",
      "INPUT_EVENT_BUFFER",
      "INPUT_EVENT_RATE",
      "LLM_API_KEY",
      "OCR_WORKER_COUNT",
      "KEYBOARD_DEFAULT_MODE",
      "KEYBOARD_MAX_TEXT_LENGTH",
      "KEYBOARD_DEFAULT_DELAY_PER_CHAR",
      "KEYBOARD_MAX_DELAY",
      "KEYBOARD_BATCH_SIZE",
      "MOUSE_MIN_DUR",
      "MOUSE_MAX_DUR",
      "MOUSE_DEFAULT_SMOOTH",
      "MOUSE_SAMPLE_RATE",
      "MOUSE_STREAM_INTERVAL",
      "OCR_MAX_IMAGE_SIZE_MB",
      "OCR_TIMEOUT_MS",
      "OCR_WORKERS",
      "OCR_CACHE_TTL",
      "OCR_LANGUAGES",
      "OCR_PREPROCESSING",
      "OCR_DEFAULT_MODE",
      "OCR_ENABLE_METRICS",
      "OCR_SERVICE_API_KEY",
      "CACHE_TTL",
      "ENABLE_CACHE",
      "ENABLE_DEBUG_LOGS",
      "OUTPUT_SCHEMA_MAX_SIZE",
      "OUTPUT_SCHEMA_MAX_DEPTH",
      "OUTPUT_SCHEMA_DEFAULT_MODE",
      "OUTPUT_SCHEMA_PARSE_TIMEOUT",
      "OUTPUT_SCHEMA_ENABLE_CACHE",
      "OUTPUT_SCHEMA_CACHE_TTL",
      "OUTPUT_SCHEMA_DEBUG",
      "REACT_APP_API_URL"
    ],
    "infrastructure_constraints": [
      "Limitação de memória em pods Kubernetes",
      "Permissões de acessibilidade no macOS",
      "Variável DISPLAY no Linux",
      "Suporte multiplataforma (Windows, Linux, macOS)",
      "Necessidade de permissões para automação desktop",
      "Ambiente Node.js compatível",
      "Dependência do sistema operacional para acesso ao clipboard",
      "Limitação de memória para buffers grandes",
      "Limitação de instância única por processo",
      "Dependência de variáveis de ambiente para configuração",
      "Necessidade de acesso ao hardware do mouse e permissões adequadas",
      "Necessidade de acesso a recursos gráficos para captura de tela",
      "Limitações de recursos para pool de workers OCR",
      "Limitações de memória e CPU para buffers grandes",
      "Limite máximo de delay para evitar bloqueios longos",
      "Batch size para controle de uso de memória",
      "Variáveis de ambiente devem ser configuradas corretamente para evitar falhas",
      "Execução em ambientes com suporte a Node.js",
      "Limitação de memória para imagens capturadas",
      "Necessidade de conexões persistentes para SSE",
      "Necessidade de manter conexões SSE abertas",
      "Suporte a proxy sem buffering (X-Accel-Buffering: no)",
      "Necessidade de acesso a APIs de sistema para manipulação de teclado e clipboard",
      "Limitação de memória para OCR",
      "Escalabilidade horizontal necessária",
      "Suporte a conexões SSE persistentes",
      "Dependência de ambiente local com API NutJS rodando",
      "Limites de tempo para parsing, capacidade de escalabilidade assíncrona",
      "Limite de tamanho para outputFormat configurável via outputFormatConfig",
      "Limitação de memória para cache",
      "Necessidade de alta disponibilidade",
      "Limite de memória para parsing e tempo máximo de execução",
      "Necessidade de servidor local rodando na porta 3000",
      "Necessidade de API DeepSeek rodando localmente",
      "Dependência de permissões para captura global de input no SO",
      "Requires macOS Accessibility permissions for input capture",
      "Requires OS support for global input hooks",
      "Limitação de processamento síncrono pode impactar escalabilidade",
      "Limitação de chamadas assíncronas simultâneas para status",
      "Limitações de rede para chamadas API",
      "Limitação de localStorage do navegador",
      "Baixa latência e alta disponibilidade exigidas",
      "Gerenciamento de conexões SSE pode impactar recursos",
      "Aplicação client-side com dependência mínima de backend",
      "Limitação de memória para múltiplos workers",
      "Necessidade de acesso à internet para download de dados de linguagem",
      "Limite de memória e CPU para pool de workers",
      "Limite de tamanho máximo para imagens processadas",
      "Limitação de memória para evitar out of memory no processamento OCR",
      "Memory limits due to large base64 image processing",
      "Support for ESM and CommonJS interop",
      "Strict TypeScript compilation",
      "Limitações de memória e CPU para validação em alta escala",
      "Limite de memória para processamento de imagens grandes",
      "Limitações de recursos para serviços de captura em ambientes restritos",
      "Número de workers limitado ao número de CPUs disponíveis",
      "Limite de timeout 30s para chamadas externas",
      "Necessidade de alta disponibilidade e escalabilidade",
      "Baixa latência requerida",
      "Alta disponibilidade"
    ]
  },
  "lastCommitHash": "6bc1ba213b88b1d79682e17000db50fbf2e811e8"
}
