{
  "project_metadata": {
    "name": "NutJS Desktop Automation API – Web/Mobile/Desktop automation backend with AI/LLM integration, input event streaming, and RESTful services",
    "domain": [
      "Web/Mobile/Desktop Automation",
      "AI/LLM Integration",
      "Input Event Streaming",
      "RESTful API",
      "Clipboard Management",
      "Screen Capture",
      "Keyboard and Mouse Control",
      "UI Automation",
      "Test Automation",
      "Computer Vision",
      "Natural Language Processing",
      "Software Development",
      "Status Monitoring"
    ],
    "current_phase": [
      "Development",
      "Production",
      "Maintenance",
      "Stable Configuration",
      "MVP",
      "Testing and Validation"
    ],
    "critical_business_rules": [
      "Proteção das chaves de api",
      "Configuração correta do ambiente para evitar falhas",
      "Manter integridade dos testes automatizados",
      "Garantir isolamento de logs e cobertura",
      "Evitar uso de 'any' explícito",
      "Garantir tratamento correto de promessas",
      "Não permitir variáveis não utilizadas",
      "Manter repositório limpo de arquivos temporários e sensíveis",
      "Garantir integridade do código versionado",
      "Autenticação obrigatória via api key para acesso aos endpoints",
      "Validação rigorosa dos parâmetros de entrada para evitar comandos inválidos",
      "Limites de tempo e tamanho para operações de digitação e captura",
      "Garantia de resposta em tempo hábil (menos de 5 segundos para a maioria das operações)",
      "Garantir execução correta dos comandos de automação",
      "Manter integridade e segurança das operações de controle do mouse",
      "Validação rigorosa dos dados de entrada",
      "Disponibilidade contínua da api",
      "Limite de uso de memória para evitar crashes",
      "Integridade das ações de automação",
      "Segurança no acesso ao clipboard",
      "Execução segura de comandos de automação",
      "Integridade das ações no desktop",
      "Resposta rápida e confiável da api",
      "Garantia de valores default para parâmetros opcionais",
      "Content size must not exceed 1 MB",
      "Text input must not be empty or contain only control characters",
      "Key presses must be from a predefined supported set",
      "Key combinations must have between 1 and 5 keys and only use allowed modifiers and letters",
      "Timing values must be non-negative integers and not exceed 300000ms",
      "Operações devem retornar resultados padronizados",
      "Tratamento robusto de erros",
      "Manter ordem cronológica dos eventos",
      "Garantir replay correto após reconexão",
      "Não perder eventos recentes dentro do buffer",
      "Rate limiting para evitar sobrecarga",
      "Garantir entrega de eventos para todos os listeners",
      "Filtragem de teclas não imprimíveis",
      "Limite máximo de 10.000 caracteres para digitação",
      "Delay máximo permitido de 300.000ms (5 minutos)",
      "Validação rigorosa de coordenadas dentro dos limites da tela",
      "Emissão correta e sequencial de eventos de mouse",
      "Execução confiável das ações físicas do mouse",
      "Precisão mínima de reconhecimento (confidence) deve ser respeitada",
      "Timeouts para espera de templates não devem ser ultrapassados",
      "Logs devem registrar falhas para auditoria",
      "Registro único de singletons para serviços de eventos",
      "Consistência na injeção de dependências",
      "Variáveis de ambiente devem estar definidas para evitar falhas",
      "Chaves de api não devem ser expostas em código fonte",
      "Ambiente deve ser corretamente identificado para habilitar comportamentos específicos",
      "bufferSize deve estar entre 1 e 100000",
      "heartbeatMs deve estar entre 1000 e 300000 ms",
      "maxRate deve estar entre 1 e 50000 eventos/s",
      "maxEventAge deve estar entre 1000 e 3600000 ms",
      "maxTextLength must be between 1 and 100000",
      "defaultDelayPerChar must be non-negative",
      "maxDelay must be between 0 and 3600000",
      "batchSize must be between 1 and 1000",
      "defaultMode must be one of: instant, perChar, total",
      "Log level must reflect environment settings",
      "Development logs must be human-readable",
      "Production logs must be performant and minimal",
      "minDuration must be less than maxDuration",
      "Duration values must be positive integers",
      "Smooth movement flag must be boolean",
      "Garantir resposta consistente para sucesso e falha",
      "Não perder mensagens de erro",
      "Precisão na posição do cursor",
      "Execução correta da sequência de eventos",
      "Respeito aos tipos de botões e opções",
      "Regiões devem ser definidas com coordenadas válidas",
      "Confiança deve ser considerada para decisões automatizadas",
      "Serviços de automação devem implementar contratos definidos",
      "Execução de comandos deve ser consistente e rastreável",
      "api versioning deve ser respeitada",
      "Rotas /api protegidas contra conflito com SPA",
      "Shutdown gracioso para evitar perda de dados",
      "Garantir digitação instantânea sem delays",
      "Suporte apenas a teclas mapeadas",
      "Tratamento robusto de erros para operações de teclado",
      "Movimentação precisa do cursor",
      "Execução correta de cliques e arrastos",
      "Configuração dinâmica da velocidade do mouse",
      "Captura precisa e confiável da tela",
      "Conversão correta e eficiente para PNG",
      "Logging detalhado para auditoria",
      "Autenticação obrigatória para streaming de posição do mouse",
      "Validação rigorosa de schemas JSON para todas as requisições",
      "Garantia de resposta consistente com status de sucesso",
      "Garantir entrega ordenada e completa dos eventos",
      "Manter conexões SSE ativas com heartbeat",
      "Preservar integridade do buffer de eventos para replay",
      "Garantir que operações de teclado e clipboard sejam executadas com sucesso ou retornem erros claros",
      "Validar rigorosamente os dados de entrada para evitar comandos inválidos",
      "Manter integridade e segurança dos dados manipulados no clipboard",
      "Requisições devem conter api key válida",
      "Falha na autenticação bloqueia acesso",
      "Consistent error response format",
      "Proper HTTP status codes",
      "No leakage of sensitive error details in production",
      "request body must strictly conform to defined Zod schemas",
      "Invalid requests must be rejected with HTTP 400",
      "Proibição de propriedades adicionais não definidas",
      "Garantia de valores dentro dos limites especificados",
      "Content must be a non-empty string",
      "No additional properties allowed in requests",
      "Input data must conform to JSON Schema Draft 7",
      "Text input length between 1 and 10000 characters",
      "Registro correto e consistente das rotas",
      "Disponibilidade das APIs de automação",
      "Segurança no acesso às rotas",
      "Garantir entrega em tempo real dos eventos via SSE",
      "Manter integridade e consistência do buffer de eventos",
      "Respeitar limites de idade máxima para eventos armazenados",
      "Garantir que comandos de mouse sejam enviados e recebidos corretamente",
      "Não causar efeitos colaterais inesperados no sistema alvo",
      "Garantir integridade e precisão dos dados de input",
      "Diferenciar corretamente eventos de mouse e teclado",
      "Manter sincronização temporal dos eventos",
      "Garantir unicidade do id do evento",
      "Manter ordem temporal dos eventos",
      "Precisão na captura das coordenadas do cursor",
      "Cobertura mínima de testes 80%",
      "Padrões de nomenclatura *.test.tsx",
      "Documentação contínua no know-how.txt",
      "api must return valid base64 image data",
      "Saved file must be a valid PNG",
      "Errors must abort process",
      "Isolamento completo dos testes",
      "Consistência dos mocks",
      "Ambiente de testes controlado",
      "Não emitir arquivos durante compilação (noEmit: true)",
      "Excluir node_modules da compilação",
      "Garantir tipagem estrita",
      "Separação clara entre src e dist",
      "Exclusão de testes do build",
      "Excluir arquivos de teste da compilação",
      "Remover comentários no output",
      "Não gerar source maps em produção",
      "Validação rigorosa dos parâmetros de entrada para evitar chamadas inválidas ao LLM",
      "Respeito aos limites de tokens e temperatura",
      "Validação rigorosa de formatos de saída",
      "Garantia de resposta consistente e formatada",
      "Fallback seguro em caso de erro no parsing",
      "Manter limites de maxTokens por modelo",
      "Respeitar custo por token para controle financeiro",
      "Timeout e retries configurados para evitar falhas silenciosas",
      "Garantir integridade dos dados de resposta",
      "Manter compatibilidade com versões do modelo",
      "Garantir resposta consistente do LLM",
      "Manter segurança das chaves api",
      "Registrar logs de uso e erros",
      "Validação rigorosa do input",
      "Autenticação obrigatória via x-api-key",
      "Limite máximo para tamanho do outputFormat",
      "Respeito aos limites de tokens e temperatura para controle de custo e performance",
      "Registro correto e único de dependências no container",
      "Isolamento de serviços para evitar efeitos colaterais",
      "Registro correto e sequencial das rotas",
      "Propagação adequada de erros",
      "Isolamento dos controllers",
      "Validação estrita do formato JSON de saída",
      "Prevenção de prototype pollution",
      "Controle de profundidade de esquemas para evitar recursão infinita",
      "Validação estrita dos dados conforme esquema",
      "Cache de esquemas deve respeitar TTL para evitar dados obsoletos",
      "Garantir compatibilidade entre formatos legado e dinâmico",
      "Padronizar respostas de sucesso e erro",
      "Evitar perda de dados em transformações",
      "Garantir integridade e formato correto da resposta do LLM",
      "Tratar erros do modelo sem falhas silenciosas",
      "Limitar tamanho e profundidade do schema de saída",
      "Mapeamento correto entre modelo e provedor",
      "Consistência na enumeração de modelos",
      "api key must be valid and kept secret",
      "Service endpoint must respond within acceptable time",
      "Payload format must comply with api specification",
      "Autenticação via api key obrigatória",
      "Resposta válida do modelo deve conter dados no formato esperado",
      "Testes devem validar múltiplos modelos para cobertura funcional",
      "Suporte correto a todas as teclas mapeadas",
      "Tratamento robusto de erros para evitar falhas silenciosas",
      "Execução correta da ordem de pressionar e liberar em combinações",
      "Reliable input simulation",
      "Consistent clipboard state",
      "Graceful error handling",
      "Captura precisa e em tempo real dos eventos globais de mouse e teclado",
      "Encerramento gracioso para evitar vazamento de recursos",
      "Captura precisa e confiável de eventos de input",
      "Tratamento correto de erros para evitar crashes",
      "Garantir inicialização correta do GlobalInputCaptureService",
      "Registrar falhas críticas de inicialização",
      "Parar serviços de captura de eventos de forma segura",
      "Não perder eventos de input relevantes",
      "Evitar sobrecarga por excesso de eventos",
      "Garantir compatibilidade multiplataforma, especialmente macOS",
      "Ensure reliable start and stop of event capture",
      "Avoid resource leaks on shutdown",
      "Garantir rate limiting configurável para evitar sobrecarga",
      "Manter singleton para consistência do dispatcher",
      "Listeners devem ser gerenciados corretamente para evitar leaks",
      "Disponibilidade da interface para interação com api",
      "Carregamento correto dos recursos externos",
      "Precisão na captura de tela",
      "Sincronização entre controle de mouse e teclado",
      "Exibição correta do status do sistema",
      "Atualização assíncrona confiável do status",
      "Navegação segura para documentação externa",
      "render root component only once",
      "Ensure DOM element with id 'root' exists",
      "Consistência visual",
      "Responsividade em múltiplos dispositivos",
      "Interatividade fluida em botões",
      "Consistência visual entre navegadores",
      "Suporte a layouts responsivos",
      "Manter tipagem estrita",
      "Garantir compatibilidade JSX",
      "Excluir node_modules e dist do build",
      "Build consistency",
      "Hot-reloading enabled for dev",
      "Output directory cleaned before build",
      "Garantir controle seguro da automação desktop via web",
      "Manter compatibilidade com api NutJS",
      "Exibir status correto da api",
      "Não permitir múltiplas checagens simultâneas",
      "Atualizar status em tempo real",
      "cache TTL de 60 segundos para status",
      "timeout de requisição em 5 segundos",
      "manter integridade do cache localStorage",
      "Status accuracy must never be compromised",
      "Latency measurement must be precise",
      "Build output must be cache-busted",
      "Dev server proxy must route api calls correctly",
      "api must always respond to /status endpoint",
      "Latency must be reported accurately",
      "Errors must return HTTP 503 with proper message"
    ]
  },
  "technical_stack": {
    "primary_language": [
      "TypeScript 5.x",
      "Node.js 18+",
      "JavaScript (ES2020+)",
      "React 18.x",
      "HTML5",
      "CSS3"
    ],
    "frameworks": [
      "Fastify 4.x",
      "React 18.x",
      "Jest 29.x",
      "Webpack 5.x",
      "PM2 5",
      "TSyringe",
      "Zod 3.x",
      "NutJS",
      "Express 4.x",
      "React-Bootstrap 2.x"
    ],
    "databases": ["PostgreSQL 15", "Redis 7.0"],
    "external_services": [
      "OpenAI API",
      "DeepSeek API",
      "NutJS",
      "clipboardy",
      "sharp",
      "LangChain",
      "SSE clients",
      "nanoid",
      "pino",
      "dotenv",
      "uiohook-napi",
      "GitHub",
      "Bootstrap CDN",
      "Font Awesome CDN"
    ],
    "package_manager": ["npm", "yarn"]
  },
  "architecture_patterns": {
    "design_pattern": [
      "Clean Architecture",
      "Dependency Injection",
      "Modular Architecture",
      "RESTful API",
      "Event-driven",
      "Singleton",
      "Adapter Pattern",
      "Service Layer",
      "Schema Validation",
      "DTO Pattern",
      "Observer Pattern",
      "Factory Pattern",
      "Plugin Architecture",
      "Controller-Service Pattern",
      "Component-Based Architecture",
      "SPA container",
      "Responsive Web Design"
    ],
    "folder_structure": [
      "src/ - main source code",
      "dist/ - build output",
      "web/ - frontend code",
      "tests/ - unit and integration tests",
      "config/ - configuration files",
      "domain/ - domain entities and interfaces",
      "application/services - business logic and services",
      "infrastructure/adapters - external integrations",
      "interface/controllers - API controllers and middleware",
      "schemas/ - validation schemas",
      "types/ - shared types and enums",
      "public/ - static assets",
      "components/ - React UI components",
      "hooks/ - custom React hooks",
      "styles/ - CSS files"
    ],
    "naming_conventions": [
      "camelCase for variables and functions",
      "PascalCase for classes, types, and React components",
      "kebab-case for files and endpoints",
      "UPPER_SNAKE_CASE for environment variables and constants",
      "DTOs with 'Request'/'Schema' suffix",
      "Interfaces prefixed with 'I'",
      "CamelCase for enums",
      "PascalCase for exported constants"
    ],
    "module_boundaries": [
      "Clear separation between backend (api) and frontend (React)",
      "Domain does not depend on Application or Infrastructure",
      "Application depends on Domain",
      "Infrastructure depends on Application",
      "Interface depends on Application and Infrastructure",
      "Separation between controllers, services, and infrastructure",
      "Dependency injection for decoupling",
      "Separation between validation (schemas) and business logic",
      "Isolated configuration modules",
      "Separation between DTOs, entities, and services",
      "Controllers expose routes and delegate logic to services",
      "Services encapsulate business rules and hardware/system interactions",
      "Types and enums shared via types folder",
      "Separation between UI components and styles",
      "Separation between source code and public assets",
      "Exclusion of node_modules and tests from build"
    ]
  },
  "code_standards": {
    "style_guide": [
      "Airbnb JavaScript/TypeScript Style Guide",
      "ESLint Recommended",
      "Prettier",
      "TypeScript ESLint Recommended",
      "CSS Standard Practices",
      "JSDoc for documentation"
    ],
    "linting_rules": [
      "ESLint with @typescript-eslint plugin",
      "Custom rules in .eslintrc.js",
      "@typescript-eslint/no-explicit-any: error",
      "@typescript-eslint/no-unused-vars: error with argsIgnorePattern '^_'",
      "@typescript-eslint/no-floating-promises: error",
      "no-async-promise-executor: error",
      "no-await-in-loop: warn",
      "strict typing",
      "Prohibition of implicit any"
    ],
    "formatting": [
      "Prettier with default config",
      "prettier --write .",
      "semi: true",
      "trailingComma: all",
      "singleQuote: true",
      "printWidth: 100",
      "tabWidth: 2",
      "Integration with ESLint for consistent formatting"
    ],
    "documentation_style": [
      "JSDoc for functions, classes, and interfaces",
      "Markdown comments for endpoint descriptions",
      "Inline comments in Portuguese for context"
    ],
    "type_checking": [
      "TypeScript strict mode enabled",
      "StrictNullChecks",
      "NoImplicitAny",
      "Use of zod for runtime validation",
      "Explicit types for parameters and returns",
      "Strict TypeScript settings via tsconfig.json"
    ]
  },
  "testing_strategy": {
    "test_framework": [
      "Jest 29.x",
      "ts-jest",
      "React Testing Library",
      "Postman Tests (JavaScript)"
    ],
    "test_structure": [
      "tests/ for unit and integration tests",
      "tests/unit for unit tests",
      "tests/integration for integration tests",
      "tests/components/ for UI component tests",
      "tests/hooks/ for custom hook tests",
      "__tests__ folders adjacent to code modules"
    ],
    "coverage_requirements": [
      "Minimum 80% coverage",
      "branches >= 80%",
      "functions >= 80%",
      "lines >= 80%",
      "statements >= 80%"
    ],
    "test_patterns": [
      "AAA (Arrange, Act, Assert)",
      "Given-When-Then",
      "Mocking dependencies via jest.mock",
      "Parameterized tests for multiple cases",
      "Snapshot testing for UI",
      "**/tests/**/*.test.ts",
      "**/tests/**/*.spec.ts"
    ],
    "mocking_approach": [
      "Mocks and spies via Jest",
      "jest.mock for external dependencies",
      "Fixtures for test data",
      "Mocks for clipboardy, nanoid, and logger",
      "Mocks for external APIs and services",
      "Mocks for FastifyRequest and FastifyReply",
      "Mocks for React components and hooks",
      "Mocks for uiohook-napi and event dispatchers"
    ]
  },
  "development_workflow": {
    "branch_strategy": ["GitHub Flow", "git Flow"],
    "commit_conventions": ["Conventional Commits"],
    "pr_requirements": [
      "Code review obrigatório e testes aprovados",
      "Checks automáticos de lint e testes",
      "Passing CI checks"
    ],
    "ci_cd_pipeline": [
      "Build, lint, test, and deploy automated via GitHub Actions",
      "Unit tests",
      "Linting",
      "Deploy automático em staging"
    ]
  },
  "commands": {
    "setup": ["npm install", "cp .env.example .env", "npm install && npm run prepare"],
    "install": ["npm install", "npm ci"],
    "dev": ["npm run dev", "npm start", "webpack serve --mode development", "tsc --watch"],
    "test": ["npm test", "npm run test", "npm test -- --coverage"],
    "build": ["npm run build", "tsc", "webpack --mode production"],
    "lint": ["npm run lint", "eslint . --ext .ts,.tsx"],
    "format": ["npm run format", "prettier --write ."]
  },
  "security_constraints": {
    "authentication_method": ["api Key via HTTP Header", "JWT", "api Keys for external services"],
    "authorization_rules": [
      "Role-based Access Control (RBAC)",
      "Acesso restrito a usuários com chave válida",
      "Controle de acesso via middleware Fastify",
      "api key must be valid and authorized for endpoint access"
    ],
    "sensitive_data": [
      "api Keys for OpenAI and DeepSeek",
      "Tokens JWT",
      "Clipboard content",
      "Environment variables for configuration",
      "User input event data (mouse, keyboard)",
      "Prompt and LLM responses"
    ],
    "security_headers": [
      "Content-Security-Policy",
      "X-Frame-Options",
      "Strict-Transport-Security",
      "Content-type: application/json",
      "x-api-key"
    ],
    "encryption_requirements": [
      "TLS for communication",
      "Recomendado uso de HTTPS para transporte seguro",
      "Criptografia em trânsito via HTTPS"
    ]
  },
  "performance_requirements": {
    "response_time_limits": [
      "api responses < 200ms",
      "Respostas em menos de 5000ms para operações padrão",
      "Baixa latência para operações de automação e api REST",
      "Operações de captura e busca devem responder em até 5 segundos",
      "Baixa latência para streaming SSE",
      "Timeout de 5 segundos para requisição de status"
    ],
    "optimization_priorities": [
      "Velocidade de build e testes",
      "Velocidade de resposta priorizada sobre uso de memória",
      "Validação eficiente para evitar overhead em runtime",
      "Baixa latência e uso eficiente de memória",
      "Performance otimizada em produção",
      "Logging configurável para desenvolvimento e produção"
    ],
    "caching_strategy": [
      "Redis cache with configurable TTL for static data",
      "Buffer circular atua como cache de eventos recentes",
      "Cache localStorage com TTL de 60 segundos",
      "Configuração carregada uma única vez na inicialização"
    ],
    "scalability_considerations": [
      "Arquitetura escalável horizontalmente via containers",
      "Suporte a múltiplas requisições simultâneas",
      "Streaming SSE para dados em tempo real",
      "Escalabilidade horizontal via múltiplas instâncias da api",
      "Configuração centralizada facilita escalabilidade horizontal",
      "Suporte a múltiplos clientes SSE simultâneos"
    ]
  },
  "error_handling": {
    "error_format": [
      "JSON padrão com campos success, error, code e detalhes",
      "Zod validation error format",
      "Objeto CommandResult com success boolean e error string opcional",
      "Logs estruturados via logger configurado"
    ],
    "logging_strategy": [
      "Log level configurável via LOG_LEVEL",
      "Logging estruturado com pino",
      "Logs separados em logs/ e *.log",
      "Níveis debug, info, warn e error para monitoramento detalhado",
      "Formato human-readable em dev"
    ],
    "monitoring_tools": [
      "Sentry para monitoramento de erros em produção",
      "PM2 internal monitoring",
      "Integrável com sistemas externos via logs (ex: ELK, Datadog)"
    ],
    "error_recovery": [
      "Retries automáticos para falhas temporárias",
      "Tratamento de erros via middleware Fastify",
      "Tratamento de exceções para evitar falhas e retornar mensagens claras",
      "Fail-fast: encerra processo em caso de configuração inválida",
      "Fallbacks configurados",
      "Shutdown gracioso para evitar falhas abruptas"
    ]
  },
  "dependencies_context": {
    "critical_dependencies": [
      "OpenAI API",
      "DeepSeek API",
      "TypeScript",
      "Fastify",
      "React",
      "Jest",
      "NutJS",
      "TSyringe",
      "Zod",
      "clipboardy",
      "sharp",
      "nanoid",
      "pino",
      "dotenv",
      "uiohook-napi",
      "LangChain",
      "Webpack",
      "PM2",
      "React-Bootstrap"
    ],
    "deprecated_packages": ["Nenhum"],
    "version_constraints": [
      "Node.js >=18",
      "TypeScript 5.x",
      "Fastify 4.x",
      "Zod >=3.x",
      "React >=18.0.0",
      "React-Bootstrap >=2.0.0",
      "clipboardy >=3.0.0",
      "tsyringe 4.x",
      "nanoid >=4.0.0",
      "Webpack ^5.89.0"
    ],
    "internal_packages": [
      "@nut-tree-fork/nut-js",
      "domain/interfaces",
      "domain/entities",
      "application/services",
      "infrastructure/adapters",
      "interface/controllers",
      "schemas",
      "types",
      "config",
      "dto",
      "middleware",
      "factory",
      "components",
      "hooks"
    ]
  },
  "current_challenges": {
    "technical_debt": [
      "Refatoração de módulos legados em JavaScript para TypeScript",
      "Necessidade de testes mais abrangentes para edge cases do clipboard",
      "Melhorar tratamento de eventos estendidos",
      "Documentação mais detalhada",
      "Manutenção das estratégias de digitação e eventos pode crescer em complexidade",
      "Tratamento de erros mais granular",
      "Melhorar cobertura de testes",
      "Validação de variáveis de ambiente ainda não implementada",
      "Falta de tratamento explícito de erros no registro de rotas",
      "Necessidade de melhorar fallback e tratamento de erros em parsing complexo",
      "Necessidade de testes de integração com LLM real",
      "api key exposta no código",
      "Falta de logging e métricas detalhadas"
    ],
    "known_issues": [
      "Inconsistências em ambientes de desenvolvimento local",
      "Limitações na manipulação de grandes volumes de texto para digitação",
      "Dependência de permissões específicas do SO",
      "Compatibilidade entre versões de Node.js e dependências nativas",
      "Possível perda de eventos em buffer cheio",
      "Rate limit pode descartar eventos em picos",
      "Performance pode ser impactada em textos muito longos com delays altos",
      "Dependência da resolução da tela para validação de coordenadas",
      "Dependência de variáveis de ambiente pode causar falhas se não configuradas",
      "Possível falha silenciosa se variáveis de ambiente forem mal formatadas",
      "Possível vazamento de recursos se conexão SSE não for fechada corretamente",
      "Possível desconexão silenciosa se heartbeat falhar",
      "Ausência de controle explícito de autenticação e autorização",
      "Dependência da disponibilidade da api local",
      "Parsing pode exceder timeout em schemas muito grandes",
      "Dependência de endpoint local ativo",
      "macOS Accessibility permissions may block event capture",
      "Potential platform compatibility issues with uiohook-napi",
      "Rate limiting depende de variável de ambiente, pode ser inválida",
      "Cache pode ser limpo se JSON inválido for detectado"
    ],
    "performance_bottlenecks": [
      "Análise de type-checking pode impactar performance do lint",
      "Operações de captura e busca de imagens podem ser custosas",
      "Uso de uma única instância pode limitar throughput",
      "Processamento intensivo de imagens pode impactar performance",
      "Potencial latência em operações de captura e eventos globais",
      "Uso de await sequencial em digitação por caractere pode causar lentidão",
      "Scroll suave pode causar delays perceptíveis em durações longas",
      "Configurações incorretas podem impactar throughput e latência",
      "Buffer pode crescer indefinidamente sem pruning",
      "Operação type pode ser lenta dependendo do timing configurado",
      "Parsing síncrono pode impactar latência em formatos complexos",
      "Latência nas chamadas assíncronas a provedores externos",
      "Validação e parsing de outputFormat podem impactar performance",
      "Parsing JSON e compilação de esquemas podem impactar em cargas elevadas",
      "Parsing de formatos complexos pode ser custoso",
      "Potential event flooding mitigated by selective logging",
      "Limitação do rate limiting para evitar sobrecarga",
      "Chamadas repetidas sem debounce podem impactar"
    ],
    "migration_status": [
      "Migração para TypeScript em andamento",
      "Atualizado para TypeScript 5.x, uso de Fastify 4.x",
      "Estável, sem migrações em andamento"
    ]
  },
  "team_preferences": {
    "code_review_focus": [
      "Cobertura de testes",
      "Qualidade do código",
      "Conformidade com padrões",
      "Conformidade com regras de lint",
      "Evitar uso de any",
      "Tratamento correto de promessas",
      "Segurança, legibilidade e cobertura de testes",
      "Validação de segurança na autenticação",
      "Consistência nos formatos de resposta",
      "Validação de entrada",
      "Separação clara de camadas",
      "Uso correto de injeção de dependências",
      "Qualidade da tipagem",
      "Segurança e validação",
      "Validação correta dos schemas",
      "Clareza e documentação",
      "Tratamento de erros",
      "Consistência de retorno",
      "Performance e segurança",
      "Verificação de tratamento de erros",
      "Conformidade com rate limiting",
      "Qualidade dos logs",
      "Validação de limites, tratamento de erros, clareza nas estratégias",
      "Consistência de logging",
      "Uso correto de async/await",
      "Consistência na injeção de dependências",
      "Uso correto de singletons",
      "Validação de variáveis de ambiente e segurança das chaves",
      "Validação rigorosa de limites e tratamento de erros",
      "Imutabilidade das configurações"
    ],
    "documentation_requirements": [
      "Documentação clara via JSDoc",
      "Documentação clara para APIs e módulos críticos",
      "Documentação clara dos parâmetros e exemplos de uso",
      "Documentação clara dos endpoints e exemplos de uso",
      "Documentação clara via JSDoc e README atualizados",
      "Documentação clara para APIs e componentes principais",
      "Documentação clara dos schemas e tipos",
      "JSDoc para todos os schemas e tipos",
      "JSDoc para todos os métodos públicos",
      "Documentação clara via JSDoc para interfaces e métodos públicos",
      "Documentação clara para métodos públicos e interfaces",
      "Documentação clara para serviços e adaptadores",
      "Documentar variáveis de ambiente e seus usos",
      "Documentação clara via JSDoc para interfaces e funções",
      "JSDoc para todas as funções e constantes",
      "Documentação clara dos campos e regras de validação",
      "Documentação clara para APIs e DTOs",
      "Documentação clara dos schemas e enums",
      "Documentação clara para controllers e rotas",
      "Documentação clara via JSDoc para todas as funções públicas",
      "Comentários claros e explicativos"
    ],
    "communication_style": [
      "Comentários objetivos e formais",
      "Comentários claros e objetivos",
      "Uso de prefixo '_' para argumentos ignorados",
      "Comentários técnicos objetivos e uso de Markdown",
      "Comentários objetivos e técnicos",
      "Comentários objetivos e PRs detalhados",
      "Comentários claros e objetivos, em português",
      "Comentários claros e objetivos, uso de emojis para logs informativos",
      "Comentários objetivos e explicativos em português",
      "Comentários objetivos e técnicos, sem excesso de verbosidade",
      "Clareza e objetividade em comentários",
      "Uso de inglês para termos técnicos",
      "Comentários objetivos e uso de emojis para facilitar leitura",
      "Comentários objetivos e explicativos, uso de inglês técnico para termos específicos",
      "Comentários objetivos e claros",
      "Uso de português para contexto",
      "Comentários objetivos e informativos, sem excesso",
      "Comentários claros e objetivos, uso de JSDoc",
      "Comentários técnicos objetivos",
      "Comentários em português explicando propósito"
    ],
    "decision_log": [
      "Adoção de regras estritas para async/await e tipos explícitos",
      "Adoção do padrão MVC e uso de JWT para autenticação",
      "Uso de api key para autenticação simples",
      "Separação modular por tipo de operação (mouse, keyboard, clipboard, screen, llm)",
      "Adoção do Clean Architecture para garantir manutenibilidade",
      "Escolha do PM2 para gerenciamento de processos",
      "Configuração para modo fork e limite de memória",
      "Adoção de Fastify para alta performance",
      "Uso de tsyringe para DI",
      "Uso de TypeScript, Fastify, React, e injeção de dependência",
      "Uso do Zod para validação e tipagem",
      "Uso de clipboardy para compatibilidade multiplataforma",
      "Limite de 1 MB para evitar overhead",
      "Uso de buffer circular para otimização de memória",
      "Uso de singleton para garantir instância única",
      "Rate limiter configurável via variável de ambiente",
      "Adoção do Strategy Pattern para flexibilidade em timing de digitação",
      "Adoção de DI para facilitar testes e extensibilidade",
      "Uso de eventos para rastreabilidade das ações do mouse",
      "Uso de Dependency Injection para desacoplamento",
      "Uso de pino para logging",
      "Adoção do tsyringe para DI",
      "Uso do padrão Adapter para integração com hardware e APIs",
      "Uso de dotenv para configuração centralizada",
      "Flags booleanas para ambiente",
      "Uso de fail-fast para evitar execução com configurações inválidas",
      "Imutabilidade das configurações para segurança",
      "Uso de pino-pretty apenas em desenvolvimento para melhor legibilidade",
      "Configuração imutável para segurança",
      "Escolha do padrão Factory Method para criação de ações",
      "Uso de Marker interface para padronizar serviços de automação",
      "Uso de Fastify para performance e simplicidade",
      "Injeção de dependências para desacoplamento",
      "Separação clara entre api e SPA",
      "Uso de NutJS para abstração de teclado",
      "Configuração de autoDelayMs para 0",
      "Escolha do Nut.js para controle de mouse",
      "Uso de DI para facilitar testes e manutenção",
      "Uso de NutJS para captura de tela",
      "Sharp para processamento de imagens",
      "Injeção de dependência com tsyringe",
      "Uso de SSE para streaming por simplicidade e compatibilidade",
      "Adoção de Fastify para alta performance e tsyringe para DI",
      "Uso de api key estática para autenticação simples",
      "Uso do DomainError para padronizar erros de negócio",
      "Uso de Zod para validação por ser declarativo e integrado com TypeScript",
      "Uso de JSON Schema Draft 7 para validação",
      "Uso do padrão Controller para separar lógica de rotas",
      "Adoção do plugin pattern do Fastify",
      "Separação clara entre controller e rotas",
      "Uso de async/await para simplicidade e legibilidade",
      "Uso de discriminated unions para eventos",
      "Separação clara entre mouse e keyboard",
      "Uso de union types para eventos",
      "Separação clara entre publisher e listener",
      "Uso exclusivo de *.test.tsx para testes",
      "Estratégia de cobertura rápida priorizando execução",
      "Uso de base64 para transporte de imagem",
      "Validação via assinatura PNG",
      "Uso de mocks globais para evitar efeitos colaterais em testes",
      "Uso de zod para validação e tipagem segura",
      "Uso de DI para desacoplamento, fallback em parsing, logging estruturado",
      "Escolha do padrão Adapter para flexibilidade de provedores",
      "Uso de injeção de dependência para desacoplamento",
      "Validação via Zod para segurança",
      "Uso de enums para garantir integridade dos modelos LLM",
      "Adoção de tsyringe para DI",
      "Mocks extensivos para testes unitários",
      "Uso de Fastify plugins para modularização",
      "Mocks para isolamento em testes unitários",
      "Sanitização para segurança",
      "Escolha do Zod como engine principal de validação",
      "Uso de cache para performance",
      "Manter suporte a legacy para garantir estabilidade",
      "Uso de type guards para segurança",
      "Uso de Factory para parsing e fallback para string em erro",
      "Uso de enum para modelos para garantir tipagem forte",
      "Uso de node-fetch para simplicidade e compatibilidade",
      "Separação de testes por modelo para modularidade",
      "Uso do Adapter para desacoplar biblioteca externa",
      "Padronização de erros com mensagens prefixadas",
      "Uso de import dinâmico para evitar carregamento desnecessário",
      "Use of event-driven pattern for input capture",
      "Centralização da inicialização em ApplicationStartupService",
      "Uso do uiohook-napi para compatibilidade multiplataforma",
      "Choice of uiohook-napi for global input capture",
      "Uso do padrão Singleton para garantir instância única",
      "Rate limiting configurável via env var",
      "Adoção de React Functional Components",
      "Uso de React-Bootstrap para UI",
      "Separação do modal em componente próprio",
      "Uso de React 18 com StrictMode para segurança",
      "Adoção de design responsivo e uso de classes utilitárias para modularidade",
      "Uso de cache localStorage para otimização de chamadas",
      "Uso de Fastify para alta performance",
      "Endpoints de health check públicos"
    ]
  },
  "api_specifications": {
    "api_style": [
      "RESTful",
      "REST with SSE for streaming",
      "Server-Sent Events (SSE)",
      "RESTful JSON API"
    ],
    "versioning_strategy": ["URI versioning (e.g., /api/v1)", "Prefixo /api/v1 para versionamento"],
    "response_formats": [
      "application/json",
      "JSON padrão com campos success, data, error",
      "Base64 encoded images",
      "text/event-stream for SSE"
    ],
    "rate_limiting": [
      "Configuração via variável de ambiente INPUT_EVENT_RATE",
      "Limite padrão 5000 eventos por segundo",
      "1000 requests por minuto por IP"
    ]
  },
  "deployment_context": {
    "environments": ["development", "staging", "production", "Localhost: http://localhost:3000"],
    "deployment_method": ["PM2", "Docker", "CI/CD pipeline via GitHub Actions", "Node.js runtime"],
    "environment_variables": [
      "NODE_ENV",
      "PORT",
      "LOG_LEVEL",
      "API_KEY",
      "OPENAI_API_KEY",
      "DEEPSEEK_API_KEY",
      "INPUT_EVENT_BUFFER",
      "INPUT_EVENT_RATE",
      "INPUT_EVENT_HEARTBEAT",
      "INPUT_EVENT_MAX_AGE",
      "KEYBOARD_DEFAULT_MODE",
      "KEYBOARD_MAX_TEXT_LENGTH",
      "KEYBOARD_DEFAULT_DELAY_PER_CHAR",
      "KEYBOARD_MAX_DELAY",
      "KEYBOARD_BATCH_SIZE",
      "MOUSE_MIN_DUR",
      "MOUSE_MAX_DUR",
      "MOUSE_DEFAULT_SMOOTH",
      "MOUSE_SAMPLE_RATE",
      "MOUSE_STREAM_INTERVAL",
      "LLM_API_KEY",
      "LLM_SERVICE_ENDPOINT",
      "CACHE_TTL",
      "ENABLE_CACHE",
      "OUTPUT_SCHEMA_MAX_SIZE",
      "OUTPUT_SCHEMA_MAX_DEPTH",
      "OUTPUT_SCHEMA_PARSE_TIMEOUT"
    ],
    "infrastructure_constraints": [
      "Limitação de memória em pods Kubernetes",
      "Permissões de acessibilidade no macOS",
      "Suporte multiplataforma (Windows, Linux, macOS)",
      "Necessidade de acesso ao desktop local para automação",
      "Dependência do sistema operacional para acesso ao clipboard",
      "Limitação de instância única por processo",
      "Necessidade de acesso ao hardware do mouse e permissões adequadas",
      "Necessidade de acesso a recursos gráficos para captura de tela",
      "Limitações de memória e CPU para buffers grandes",
      "Necessidade de conexões persistentes para SSE",
      "Necessidade de manter conexões SSE abertas",
      "Suporte a proxy sem buffering (X-Accel-Buffering: no)",
      "Necessidade de acesso a APIs de sistema para manipulação de teclado e clipboard",
      "Limitações de memória e CPU para execução do servidor",
      "Necessidade de ambiente local com api NutJS rodando",
      "Limite de tamanho para outputFormat configurável via outputFormatConfig",
      "Necessidade de permissões para captura global de input no SO",
      "Requires macOS Accessibility permissions for input capture",
      "Requires OS support for global input hooks",
      "Necessidade de suporte a HTTPS e CDN para assets estáticos",
      "Limitação de localStorage do navegador",
      "Baixa latência de rede requerida"
    ]
  },
  "lastCommitHash": "600e2794240623a2a68903510c348a73871965f4"
}
