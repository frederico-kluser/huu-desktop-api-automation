appId: com.huu.desktop.automation
productName: HUU Desktop Automation
directories:
  output: release
  buildResources: build-resources

files:
  - electron/**/*
  - dist/**/*
  - web/dist/**/*
  - assets/**/*
  - package.json
  - node_modules/**/*
  - '!**/*.ts'
  - '!**/*.tsx'
  - '!**/*.map'
  - '!**/*.md'
  - '!tests/**/*'
  - '!src/**/*'
  - '!web/src/**/*'
  - '!**/.git'
  - '!**/.github'
  - '!**/.vscode'
  - '!**/node_modules/*/{CHANGELOG.md,README.md,README,readme.md,readme}'
  - '!**/node_modules/*/{test,__tests__,tests,powered-test,example,examples}'
  - '!**/node_modules/*.d.ts'
  - '!**/node_modules/.bin'
  - '!**/*.{iml,o,hprof,orig,pyc,pyo,rbc,swp,csproj,sln,xproj}'

asarUnpack:
  - node_modules/@nut-tree-fork/nut-js/**/*
  - node_modules/robotjs/**/*
  - node_modules/sharp/**/*
  - node_modules/tesseract.js/**/*
  - tessdata/**/*

mac:
  category: public.app-category.productivity
  icon: assets/icon.icns
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: build-resources/entitlements.mac.plist
  entitlementsInherit: build-resources/entitlements.mac.plist
  darkModeSupport: true
  target:
    - target: dmg
      arch:
        - x64
        - arm64
    - target: zip
      arch:
        - x64
        - arm64

dmg:
  title: HUU Desktop Automation
  contents:
    - x: 130
      y: 220
    - x: 410
      y: 220
      type: link
      path: /Applications

win:
  icon: assets/icon.ico
  target:
    - target: nsis
      arch:
        - x64
        - ia32
    - target: portable
      arch:
        - x64
  publisherName: HUU Team
  requestedExecutionLevel: requireAdministrator

nsis:
  oneClick: false
  perMachine: true
  allowToChangeInstallationDirectory: true
  allowElevation: true
  installerIcon: assets/icon.ico
  uninstallerIcon: assets/icon.ico
  installerHeaderIcon: assets/icon.ico
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: HUU Desktop Automation
  artifactName: ${productName}-Setup-${version}.${ext}

linux:
  icon: assets/icon.png
  category: Utility
  target:
    - target: AppImage
      arch:
        - x64
    - target: deb
      arch:
        - x64
    - target: rpm
      arch:
        - x64
  maintainer: HUU Team
  synopsis: Desktop automation tool
  description: Professional desktop automation application with visual builder

appImage:
  artifactName: ${productName}-${version}.${ext}

deb:
  depends:
    - libx11-xcb1
    - libxcomposite1
    - libxcursor1
    - libxdamage1
    - libxi6
    - libxtst6
    - libnss3
    - libatk-bridge2.0-0
    - libgtk-3-0

rpm:
  depends:
    - libX11-xcb
    - libXcomposite
    - libXcursor
    - libXdamage
    - libXi
    - libXtst
    - nss
    - atk
    - gtk3

publish:
  - provider: github
    owner: huu-desktop-automation
    repo: huu-desktop-api-automation
    releaseType: release

electronDownload:
  cache: ./electron-cache
  mirror: https://npmmirror.com/mirrors/electron/

compression: maximum
removePackageScripts: true

protocols:
  - name: huu-automation
    schemes:
      - huu
